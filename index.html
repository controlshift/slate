<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>ControlShift Labs API & Webhook Reference</title>
    <link rel="Shortcut Icon" href="http://www.controlshiftlabs.com/wp-content/themes/controlshift/images/favicon.ico" type="image/x-icon" />

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight, .highlight .w {
  color: #f8f8f2;
  background-color: #272822;
}
.highlight .err {
  color: #272822;
  background-color: #f92672;
}
.highlight .c, .highlight .cd, .highlight .cm, .highlight .c1, .highlight .cs {
  color: #75715e;
}
.highlight .cp {
  color: #f4bf75;
}
.highlight .nt {
  color: #f4bf75;
}
.highlight .o, .highlight .ow {
  color: #f8f8f2;
}
.highlight .p, .highlight .pi {
  color: #f8f8f2;
}
.highlight .gi {
  color: #a6e22e;
}
.highlight .gd {
  color: #f92672;
}
.highlight .gh {
  color: #66d9ef;
  background-color: #272822;
  font-weight: bold;
}
.highlight .k, .highlight .kn, .highlight .kp, .highlight .kr, .highlight .kv {
  color: #ae81ff;
}
.highlight .kc {
  color: #fd971f;
}
.highlight .kt {
  color: #fd971f;
}
.highlight .kd {
  color: #fd971f;
}
.highlight .s, .highlight .sb, .highlight .sc, .highlight .sd, .highlight .s2, .highlight .sh, .highlight .sx, .highlight .s1 {
  color: #a6e22e;
}
.highlight .sr {
  color: #a1efe4;
}
.highlight .si {
  color: #cc6633;
}
.highlight .se {
  color: #cc6633;
}
.highlight .nn {
  color: #f4bf75;
}
.highlight .nc {
  color: #f4bf75;
}
.highlight .no {
  color: #f4bf75;
}
.highlight .na {
  color: #66d9ef;
}
.highlight .m, .highlight .mf, .highlight .mh, .highlight .mi, .highlight .il, .highlight .mo, .highlight .mb, .highlight .mx {
  color: #a6e22e;
}
.highlight .ss {
  color: #a6e22e;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/controlshift.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" alt="ControlShift Labs" />
        <div class="lang-selector">
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href="http://www.controlshiftlabs.com/">Sign Up for ControlShift Labs</a></li>
            <li><a href="https://github.com/tripit/slate">Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the <a href="http://www.controlshiftlabs.com/">ControlShift Labs</a> Developer documentation. Our APIs are designed to allow software engineers to create rich integrations between ControlShift content and third-party services and websites.</p>

<p>We offer several APIs to customers to cover different integration use cases. </p>

<ul>
<li><p><strong>JSONP API</strong> Unauthenticated API designed to be consumed by javascript clients written by front-end engineers. Quickly display public information about petitions, efforts, and users on external sites.  </p></li>
<li><p><strong>Webhooks</strong> Get notified when changes happen so external systems can react. </p></li>
<li><p><strong>Bulk Data</strong> Integrate your ControlShift instance with a data warehouse like Redshift for SQL access and reporting.</p></li>
<li><p><strong>Authenticated REST</strong> Server Side API integration option for more advanced scenarios. Uses OAuth2 to allow third-party developers to create applications and customers to grant access.</p></li>
</ul>

          <h1 id="json-api-endpoints">JSON API Endpoints</h1>

<p>The JSONP API is a simple way to embed ControlShift petition content in external sites. It&rsquo;s intended for use by a front-end developer embed content on web pages outside of the platform.  For example, a developer could:</p>

<ul>
<li>Show petitions</li>
<li>Allow a user to search for near by petitions</li>
<li>List petition categories</li>
<li>Show petitions within an effort</li>
<li>If a site visitor is logged in, show a users past actions and created petitions</li>
</ul>

<p>All of the endpoints can be consumed as JSONP instead of JSON by adding callback or variable parameters to the URLs.</p>

<p>The URL slugs through the API are the same as those that are used through the web to represent specific petitions or categories.  Many front-end libraries including jQuery make it easy to consume JSONP endpoints. Our examples below use jQuery to consume these resources.</p>

<aside class="success">
These examples use the domain <code>demo.controlshiftlabs.com</code>. You&rsquo;ll need to replace this with the hostname of your instance.
</aside>

          <h2 id="get-a-single-petition">Get a single petition</h2>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">petitionSlug</span> <span class="o">=</span> <span class="s1">'repair-the-yellow-brick-road-1'</span><span class="p">;</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'https://demo.controlshiftlabs.com/petitions/'</span><span class="o">+</span><span class="nx">petitionSlug</span><span class="o">+</span><span class="s1">'.json'</span><span class="p">,</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s1">'jsonp'</span><span class="p">,</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above code would display your returned petition data in the console.  The JSON response data would be structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">92283</span><span class="p">,</span><span class="w">
  </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Repair the Yellow Brick Road"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"repair-the-yellow-brick-road-1"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oz, the Great and Terrible, Wizard"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Yellow Brick Road has been neglected; commit to repairing the damaged sections of the road in the next year!"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Yellow Brick Road is the main road connecting Munchkin Country to the Emerald City and in its current state it's impassable."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-10-02T01:43:17Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-05-07T15:38:39Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"delivery_details"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We're off to see the wizard!"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"administered_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-21T19:05:54Z"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"homepage"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"location_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">27575</span><span class="p">,</span><span class="w">
  </span><span class="s2">"alias"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"bsd_constituent_group_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oz"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oz"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
  </span><span class="s2">"effort"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"partnership"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"group"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"resized_image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/hero/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/original/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"creator_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kristyn Arrighi"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">223</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Note: The &ldquo;group&rdquo; key is deprecated and will be removed soon. Code should be updated to use the &ldquo;partnership&rdquo; key instead.</p>
</blockquote>

<p>This retrieves a single petition object.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://demo.controlshiftlabs.com/petitions/&lt;slug&gt;.json</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>slug</td>
<td>null</td>
<td>string - required - The petition&rsquo;s unique identification slug. If none is provided, you will get a 404 error. Note: submitted as a part of the endpoint path, not as a separate URL parameter</td>
</tr>
</tbody></table>

<h3 id="working-example">Working Example</h3>

<p>View and edit a working example on codepen.io:</p>

<div class="js-codepen-data hidden" data-title="ControlShift Labs: Single Petition Example">
  <div class="codepen-html">
    <div id="js-content-wrapper" class="hidden">
      <h1 id="title"></h1>
      <h3><span id="signature_count"></span> signatures</h3>
      <p>Created by <span id="creator_name"></span></p>
      <h2>What</h2>
      <p id="what"></p>
      <h2>Who</h2>
      <p id="who"></p>
      <h2>Why</h2>
      <p id="why"></p>
    </div>
  </div>
  <pre class="codepen-js">
    $(document).ready(function(){
      var petitionSlug = 'repair-the-yellow-brick-road-1';
      $.ajax({
        url: 'https://demo.controlshiftlabs.com/petitions/'+petitionSlug+'.json',
        dataType: 'jsonp',
      })
      .done(function(data) {
        $('#title').html(data.title);
        $('#signature_count').html(data.signature_count);
        $('#creator_name').html(data.creator_name);
        $('#what').html(data.what);
        $('#who').html(data.who);
        $('#why').html(data.why);
        $('#js-content-wrapper').removeClass('hidden');
      });
    });
  </pre>
</div>

<form action="https://codepen.io/pen/define" method="POST" target="_blank" class="hidden">
  <input type="hidden" name="data" class="js-data" value="">
  <input type="submit" value="Launch Example on CodePen">
</form>

          <h2 id="get-featured-petitions">Get featured petitions</h2>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'https://demo.controlshiftlabs.com/petitions/featured.json'</span><span class="p">,</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s1">'jsonp'</span><span class="p">,</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above code would display your returned featured petitions data in the console.  The JSON would be structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"total_entries"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
    </span><span class="s2">"per_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"repair-the-yellow-brick-road-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://demo.controlshiftlabs.com/petitions/repair-the-yellow-brick-road-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Repair the Yellow Brick Road"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">" Oz, the Great and Terrible, Wizard"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Yellow Brick Road has been neglected; commit to repairing the damaged sections of the road in the next year!"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Yellow Brick Road is the main road connecting Munchkin Country to the Emerald City and in its current state it's impassable."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">223</span><span class="p">,</span><span class="w">
      </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creator_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kristyn Arrighi"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-10-02T01:43:17Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-05-07T15:38:39Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/hero/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/original/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/form/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"horizontal"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/horizontal/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/open_graph/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">" Oz, the Great and Terrible"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oz-the-great-and-terrible"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Wizard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Land of Oz, Kensington Avenue, Buffalo, NY, United States"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42.9399637"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-78.8087571"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kensington Ave"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-10T19:13:19Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Land of Oz, Kensington Avenue, Buffalo, NY, United States"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42.9399637"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-78.8087571"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kensington Ave"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-10T19:13:19Z"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"we-need-more-bike-lanes"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We Need More Bike Lanes"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My Mayor"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Build the bike lanes"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Cyclists aren't safe."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w">
      </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creator_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Greg Dutcher"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-08-12T18:08:32Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-09-14T12:43:45Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/167492/original/IMG_1854.JPG?1472046912"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">]</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/167492/original/IMG_1854.JPG?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/167492/form/IMG_1854.JPG?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"horizontal"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/167492/horizontal/IMG_1854.JPG?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/167492/open_graph/IMG_1854.JPG?1473884741"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40.6974034"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-74.1197633"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"New York"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-04-11T13:32:08Z"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"links"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"self"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/featured.json?page=1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/featured.json"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"prev"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"next"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/featured.json?page=2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/featured.json?page=3"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This retrieves a JSON object compliant with the <a href="http://jsonapi.org/">JSON API</a> specification, containing an array of featured petitions objects on its data property.</p>

<p><strong>Important Note:</strong> The previous featured petitions API endpoint at <code class="prettyprint">https://demo.controlshiftlabs.com/featured.json</code> (note the missing <code class="prettyprint">/petitions</code> path) is being deprecated and <strong>will be removed</strong> in the near future. Please use this new endpoint for retrieving featured petitions from now on.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://demo.controlshiftlabs.com/petitions/featured.json</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>locale</td>
<td>null</td>
<td>string - optional - Locale filter for petitions</td>
</tr>
</tbody></table>

<h3 id="working-example">Working Example</h3>

<p>View and edit a working example on codepen.io:</p>

<div class="js-codepen-data hidden" data-title="ControlShift Labs: Featured Petitions Example">
  <div class="codepen-html">
    <h1>Featured Petitions</h1>
    <ul id="featured-petitions">
    </ul>
  </div>
  <pre class="codepen-js">
    $(document).ready(function(){
      $.ajax({
        url: 'https://demo.controlshiftlabs.com/petitions/featured.json',
        dataType: 'jsonp',
      })
      .done(function(resp) {
        var $placeholder = $('#featured-petitions');
        $.each(resp.data, function(index, petition){
          output = '<li>'
          output += '<h2><a href="'+petition.url+'">'+petition.title+'</a></h2>';
          output += '<h3>'+petition.signature_count+' signatures out of '+petition.goal+' needed </h3>';
          output += '<p>'+petition.why+'</p>';
          output += '<p><a href="'+petition.url+'">Learn More</a></p>';
          output += '</li>';
          $placeholder.append(output);
        });
      });
    });
  </pre>
</div>

<form action="https://codepen.io/pen/define" method="POST" target="_blank" class="hidden">
  <input type="hidden" name="data" class="js-data" value="">
  <input type="submit" value="Launch Example on CodePen">
</form>

          <h2 id="get-list-of-categories">Get list of categories</h2>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'https://demo.controlshiftlabs.com/categories.json'</span><span class="p">,</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s1">'jsonp'</span><span class="p">,</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above code would display a list of categories in the console.  The JSON would be structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"category_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Education"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"education-9"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/categories/education-9.json"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">421</span><span class="p">,</span><span class="w">
    </span><span class="s2">"locales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"es"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Educaci√≥n"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"category_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Environment"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"category_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">352</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"environment-6"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/categories/environment-6.json"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2606</span><span class="p">,</span><span class="w">
    </span><span class="s2">"locales"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"es"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Medio Ambiente"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>This retrieves a JSON array of category objects.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://demo.controlshiftlabs.com/categories.json</code></p>

<h3 id="working-example">Working Example</h3>

<p>View and edit a working example on codepen.io:</p>

<div class="js-codepen-data hidden" data-title="ControlShift Labs: Categories List Example">
  <div class="codepen-html">
    <h1>Categories List</h1>
    <div id="categories">
    </div>
  </div>
  <pre class="codepen-js">
    $(document).ready(function(){
      $.ajax({
        url: 'https://demo.controlshiftlabs.com/categories.json',
        dataType: 'jsonp',
      })
      .done(function(data) {
        var $placeholder = $('#categories');
        $.each(data, function(index, category){
          output = '<h2><a href="'+category.url+'">'+category.category_name+'</a></h2>';
          output += '<ul>'
          output += '<li><strong>Slug:</strong> '+category.slug+'</li>';
          output += '<li><strong>Signatures:</strong>'+category.signature_count+'</li>';
          output += '<li><strong>API URL:</strong>'+category.url+'</li>';
          output += '</ul><hr/>';
          $placeholder.append(output);
        });
      });
    });
  </pre>
</div>

<form action="https://codepen.io/pen/define" method="POST" target="_blank" class="hidden">
  <input type="hidden" name="data" class="js-data" value="">
  <input type="submit" value="Launch Example on CodePen">
</form>

          <h2 id="list-petitions-in-a-category">List petitions in a category</h2>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'https://demo.controlshiftlabs.com/categories/oz.json'</span><span class="p">,</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s1">'jsonp'</span><span class="p">,</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above code would return petitions data from the category with the slug <code class="prettyprint">oz</code>.  The JSON would be structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"current_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
  </span><span class="s2">"previous_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"next_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oz"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"results"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"let-dorothy-go-home"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://demo.controlshiftlabs.com/petitions/let-dorothy-go-home"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Let Dorothy Go Home!"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">" Oz, the Great and Terrible, Wizard"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Let poor Dorothy Gale go home to Kansas"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"There's no place like home."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creator_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tin Man"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-02T01:43:17Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-07T15:38:39Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/hero/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/original/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/form/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"horizontal"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/horizontal/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/open_graph/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">" Oz, the Great and Terrible"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oz-the-great-and-terrible"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Wizard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Land of Oz, Kensington Avenue, Buffalo, NY, United States"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42.9399637"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-78.8087571"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kensington Ave"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-10T19:13:19Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"repair-the-yellow-brick-road-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://demo.controlshiftlabs.com/petitions/repair-the-yellow-brick-road-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Repair the Yellow Brick Road"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">" Oz, the Great and Terrible, Wizard"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Yellow Brick Road has been neglected; commit to repairing the damaged sections of the road in the next year!"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Yellow Brick Road is the main road connecting Munchkin Country to the Emerald City and in its current state it's impassable."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">223</span><span class="p">,</span><span class="w">
      </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creator_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kristyn Arrighi"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-10-02T01:43:17Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-05-07T15:38:39Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/hero/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/original/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/form/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"horizontal"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/horizontal/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/open_graph/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">" Oz, the Great and Terrible"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oz-the-great-and-terrible"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Wizard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Land of Oz, Kensington Avenue, Buffalo, NY, United States"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42.9399637"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-78.8087571"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kensington Ave"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-10T19:13:19Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Land of Oz, Kensington Avenue, Buffalo, NY, United States"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42.9399637"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-78.8087571"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kensington Ave"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-10T19:13:19Z"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>This retrieves a paginated list of petitions in a category.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://demo.controlshiftlabs.com/categories/&lt;category slug&gt;.json</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>category slug</td>
<td>null</td>
<td>string - required - submitted as a part of the endpoint path, not as a separate URL parameter</td>
</tr>
<tr>
<td>page</td>
<td>1</td>
<td>integer - optional - The page number of results for the specified category. Minimum of 1.</td>
</tr>
</tbody></table>

<h3 id="working-example">Working Example</h3>

<p>View and edit a working example on codepen.io:</p>

<div class="js-codepen-data hidden"  data-title="ControlShift Labs: List of Petitions in a Category Example">
  <div class="codepen-html">
    <h1>Petitions in category &ldquo;<span id="name"></span>&rdquo;</h1>
    <div id="petitions">
    </div>
  </div>
  <pre class="codepen-js">
    $(document).ready(function(){
      $.ajax({
        url: 'https://demo.controlshiftlabs.com/categories/mice.json',
        dataType: 'jsonp',
      })
      .done(function(data) {
        // Populate global category data
        $('#name').text(data.name);

        // Populate petitions data
        var $placeholder = $('#petitions');
        $.each(data.results, function(index, petition){
          output = '<h2><a href="'+petition.url+'">'+petition.title+'</a></h2>';
          output += '<ul>';
          output += '<li><strong>Image:</strong> '+petition.image_url+'</li>';
          output += '<li><strong>Who:</strong> '+petition.who+'</li>';
          output += '<li><strong>What:</strong> '+petition.what+'</li>';
          output += '<li><strong>Why:</strong> '+petition.why+'</li>';
          output += '<li><strong>Signatures:</strong> '+petition.signature_count+'</li>';
          output += '<li><strong>URL:</strong> '+petition.url+'</li>';
          output += '</ul><hr/>';
          $placeholder.append(output);
        });
      });
    });
  </pre>
</div>

<form action="https://codepen.io/pen/define" method="POST" target="_blank" class="hidden">
  <input type="hidden" name="data" class="js-data" value="">
  <input type="submit" value="Launch Example on CodePen">
</form>

          <h2 id="list-petitions-in-a-partnership">List petitions in a partnership</h2>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'https://demo.controlshiftlabs.com/partnerships/our-awesome-partner/petitions.json'</span><span class="p">,</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s1">'jsonp'</span><span class="p">,</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above code would return petitions data from the partnership with the slug <code class="prettyprint">our-awesome-partner</code>.  The JSON would be structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"current_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"total_pages"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
  </span><span class="s2">"previous_page"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="s2">"next_page"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Oz"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"results"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"let-dorothy-go-home"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://demo.controlshiftlabs.com/petitions/let-dorothy-go-home"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Let Dorothy Go Home!"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">" Oz, the Great and Terrible, Wizard"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Let poor Dorothy Gale go home to Kansas"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"There's no place like home."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creator_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tin Man"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-12-02T01:43:17Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-05-07T15:38:39Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/hero/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/original/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/form/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"horizontal"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/horizontal/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/open_graph/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">" Oz, the Great and Terrible"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oz-the-great-and-terrible"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Wizard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Land of Oz, Kensington Avenue, Buffalo, NY, United States"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42.9399637"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-78.8087571"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kensington Ave"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-10T19:13:19Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"repair-the-yellow-brick-road-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://demo.controlshiftlabs.com/petitions/repair-the-yellow-brick-road-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Repair the Yellow Brick Road"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">" Oz, the Great and Terrible, Wizard"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Yellow Brick Road has been neglected; commit to repairing the damaged sections of the road in the next year!"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Yellow Brick Road is the main road connecting Munchkin Country to the Emerald City and in its current state it's impassable."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">223</span><span class="p">,</span><span class="w">
      </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creator_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kristyn Arrighi"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2014-10-02T01:43:17Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-05-07T15:38:39Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/hero/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/original/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/form/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"horizontal"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/horizontal/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d8s293fyljwh4.cloudfront.net/petitions/images/92283/open_graph/2016-06-20-1466458252-1098096-ywllowbrickroad.jpg?1473884741"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">" Oz, the Great and Terrible"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"oz-the-great-and-terrible"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Wizard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Land of Oz, Kensington Avenue, Buffalo, NY, United States"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42.9399637"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-78.8087571"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kensington Ave"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-10T19:13:19Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Land of Oz, Kensington Avenue, Buffalo, NY, United States"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42.9399637"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-78.8087571"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Kensington Ave"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-10T19:13:19Z"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This retrieves a paginated list of petitions in a partnership.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://demo.controlshiftlabs.com/partnerships/&lt;partnership slug&gt;/petitions.json</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>partnership slug</td>
<td>null</td>
<td>string - required - submitted as a part of the endpoint path, not as a separate URL parameter</td>
</tr>
<tr>
<td>page</td>
<td>1</td>
<td>integer - optional - The page number of results for the specified partnership. Minimum of 1.</td>
</tr>
</tbody></table>

<h3 id="working-example">Working Example</h3>

<p>View and edit a working example on codepen.io:</p>

<div class="js-codepen-data hidden"  data-title="ControlShift Labs: List of Petitions in a Partnership Example">
  <div class="codepen-html">
    <h1>Petitions in partnership &ldquo;<span id="name"></span>&rdquo;</h1>
    <div id="petitions">
    </div>
  </div>
  <pre class="codepen-js">
    $(document).ready(function(){
      $.ajax({
        url: 'https://demo.controlshiftlabs.com/partnerships/rtm-roundtable-of-mice/petitions.json',
        dataType: 'jsonp',
      })
      .done(function(data) {
        // Populate global partnership data
        $('#name').text(data.name);

        // Populate petitions data
        var $placeholder = $('#petitions');
        $.each(data.results, function(index, petition){
          output = '<h2><a href="'+petition.url+'">'+petition.title+'</a></h2>';
          output += '<ul>';
          output += '<li><strong>Image:</strong> '+petition.image_url+'</li>';
          output += '<li><strong>Who:</strong> '+petition.who+'</li>';
          output += '<li><strong>What:</strong> '+petition.what+'</li>';
          output += '<li><strong>Why:</strong> '+petition.why+'</li>';
          output += '<li><strong>Signatures:</strong> '+petition.signature_count+'</li>';
          output += '<li><strong>URL:</strong> '+petition.url+'</li>';
          output += '</ul><hr/>';
          $placeholder.append(output);
        });
      });
    });
  </pre>
</div>

<form action="https://codepen.io/pen/define" method="POST" target="_blank" class="hidden">
  <input type="hidden" name="data" class="js-data" value="">
  <input type="submit" value="Launch Example on CodePen">
</form>

          <h2 id="list-petitions-in-an-effort">List petitions in an effort</h2>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">effortSlug</span> <span class="o">=</span> <span class="s1">'drivers-licenses-for-all'</span><span class="p">;</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'https://demo.controlshiftlabs.com/efforts/'</span><span class="o">+</span><span class="nx">effortSlug</span><span class="o">+</span><span class="s1">'.json'</span><span class="p">,</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s1">'jsonp'</span><span class="p">,</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above code would return petitions data from the effort with the slug <code class="prettyprint">drivers-licenses-for-all</code>.  The JSON would be structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Drivers' Licenses for All"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"drivers-licenses-for-all"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We're asking towns and villages across New York to pass resolutions in support of the Drivers' License bill. Anyone who can pass a driving test should be able to get a license."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">511</span><span class="p">,</span><span class="w">
  </span><span class="s2">"petitions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ossining-support-drivers-licenses-for-all"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://demo.controlshiftlabs.com/petitions/ossining-support-drivers-licenses-for-all"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ossining: Support Drivers' Licenses For All"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ossining Village Board of Trustees"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pass a resolution in support of the Drivers' Licenses bill"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Undocumented immigrants need access to drivers' licenses so they can drive to work, school, and everywhere else. This will improve road safety for everyone."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">223</span><span class="p">,</span><span class="w">
      </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creator_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jacinda Moore"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-02T01:43:17Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-07T15:38:39Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ossining Village Board of Trustees"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ossining-village-board-of-trustees"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ossining"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41.1617921"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-73.8874165"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10562"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-10T19:13:19Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ossining"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41.1617921"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-73.8874165"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10562"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-10T19:13:19Z"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yonkers-support-drivers-licenses-for-all"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://demo.controlshiftlabs.com/petitions/yonkers-support-drivers-licenses-for-all"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Yonkers: Support Drivers' Licenses For All"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Yonkers City Council"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Pass a resolution in support of the Drivers' Licenses bill"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Undocumented immigrants need access to drivers' licenses so they can drive to work, school, and everywhere else. This will improve road safety for everyone."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">300</span><span class="p">,</span><span class="w">
      </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
      </span><span class="s2">"creator_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jacinda Moore"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-02T01:43:17Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-07T15:38:39Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"target"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Yonkers City Council"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yonkers-city-council"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Yonkers"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40.9443748"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-73.8993138"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10701"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-10T19:13:19Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Yonkers"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"40.9443748"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-73.8993138"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"10701"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NY"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-06-10T19:13:19Z"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>This retrieves a list of petitions in an effort.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://demo.controlshiftlabs.com/efforts/&lt;effort slug&gt;.json</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>effort slug</td>
<td>null</td>
<td>string - required - submitted as a part of the endpoint path, not as a separate URL parameter</td>
</tr>
</tbody></table>

<h3 id="working-example">Working Example</h3>

<p>View and edit a working example on codepen.io:</p>

<div class="js-codepen-data hidden" data-title="ControlShift Labs: List of Petitions in an Effort Example">
  <div class="codepen-html">
    <h1>Petitions in effort &ldquo;<span id="title"></span>&rdquo;</h1>
    <p><span id="description"></span></h1>
    <div id="petitions">
    </div>
  </div>
  <pre class="codepen-js">
    $(document).ready(function(){
      var effortSlug = 'forecast-the-facts';
      $.ajax({
        url: 'https://demo.controlshiftlabs.com/efforts/'+effortSlug+'.json',
        dataType: 'jsonp',
      })
      .done(function(data) {
        // Populate global effort data
        $('#title').text(data.title);
        $('#description').text(data.description);

        // Populate petitions data
        var $placeholder = $('#petitions');
        $.each(data.petitions, function(index, petition){
          output = '<h2><a href="'+petition.url+'">'+petition.title+'</a></h2>';
          output += '<ul>';
          output += '<li><strong>Image:</strong> '+petition.image_url+'</li>';
          output += '<li><strong>Who:</strong> '+petition.who+'</li>';
          output += '<li><strong>What:</strong> '+petition.what+'</li>';
          output += '<li><strong>Why:</strong> '+petition.why+'</li>';
          output += '<li><strong>Signatures:</strong> '+petition.signature_count+'</li>';
          output += '<li><strong>Goal:</strong> '+petition.goal+'</li>';
          output += '<li><strong>URL:</strong> '+petition.url+'</li>';
          output += '<li><strong>Location:</strong> <ul>'
          output += '<li><strong>Query:</strong> '+petition.location.query+'</li>';
          output += '<li><strong>Latitude:</strong> '+petition.location.latitude+'</li>';
          output += '<li><strong>Longitude:</strong> '+petition.location.longitude+'</li>';
          output += '</ul></li>';
          output += '</ul><hr/>';
          $placeholder.append(output);
        });
      });
    });
  </pre>
</div>

<form action="https://codepen.io/pen/define" method="POST" target="_blank" class="hidden">
  <input type="hidden" name="data" class="js-data" value="">
  <input type="submit" value="Launch Example on CodePen">
</form>

          <h2 id="find-nearby-petitions">Find nearby petitions</h2>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="kd">var</span> <span class="nx">effortSlug</span> <span class="o">=</span> <span class="s1">'drivers-licenses-for-all'</span><span class="p">,</span>
      <span class="nx">latitude</span> <span class="o">=</span> <span class="mf">38.88233</span><span class="p">,</span>
      <span class="nx">longitude</span> <span class="o">=</span> <span class="o">-</span><span class="mf">77.17109</span><span class="p">;</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'https://demo.controlshiftlabs.com/efforts/'</span><span class="o">+</span><span class="nx">effortSlug</span><span class="o">+</span><span class="s1">'/'</span><span class="o">+</span><span class="s1">'lookup/query.json'</span><span class="p">,</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s1">'jsonp'</span><span class="p">,</span>
    <span class="na">data</span><span class="p">:</span> <span class="p">{</span>
      <span class="s1">'location[latitude]'</span><span class="p">:</span> <span class="nx">latitude</span><span class="p">,</span>
      <span class="s1">'location[longitude]'</span><span class="p">:</span> <span class="nx">longitude</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span> <span class="nx">data</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<!--slash in '/'+'lookup/query.json' above disappears if combined with lookup/query-->

<blockquote>
<p>The above code would return petitions, decision makers, or objectives data from the effort with the slug <code class="prettyprint">drivers-licenses-for-all</code>. If returning decision makers, the JSON would be structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"closest_target"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ossining-village-board-of-trustees"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ossining Village Board of Trustees"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ossining, NY"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"target_petition_created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"petition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ossining-support-drivers-licenses-for-all"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ossining: Support Drivers' Licenses For All"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://demo.controlshiftlabs.com/petitions/ossining-support-drivers-licenses-for-all"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ossining Village Board of Trustees"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">223</span><span class="p">,</span><span class="w">
      </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-02T01:43:17Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-07T15:38:39Z"</span><span class="p">,</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"other_targets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yorktown-town-council"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Yorktown Town Council"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Yorktown, NY"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"target_awaiting_petition"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"create_petition_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/efforts/drivers-licenses-for-all/petitions/creating?target_id=1234"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Search for closest petition in an effort</p>

<p>This JSON endpoint allows you to reproduce the &ldquo;search for the nearest petition in an effort&rdquo; interface. Use this endpoint to build a place for users to enter their location. Once they&rsquo;ve searched for a location, we&rsquo;ll return the nearest petition. This endpoint can most easily be used with a <a href="https://developers.google.com/places/web-service/autocomplete">Google Maps</a> integration to help your users locate their addresses or other points of interest. For an example, click on the working example below.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET https://demo.controlshiftlabs.com/efforts/&lt;effort slug&gt;/lookup/query.json</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<p>This endpoints accepts a few nested attributes in a <code class="prettyprint">location</code> object, as described below.</p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>effort slug</td>
<td>null</td>
<td>string - required - submitted as a part of the endpoint path, not as a separate URL parameter</td>
</tr>
<tr>
<td>location[latitude]</td>
<td>null</td>
<td>float - required - a float representing the queried latitude</td>
</tr>
<tr>
<td>location[longitude]</td>
<td>null</td>
<td>float - required - a float representing the queried longitude</td>
</tr>
<tr>
<td>location[country]</td>
<td>null</td>
<td>string - optional - for efforts configured to use the &ldquo;by country&rdquo; search strategy, you can pass in the target country as a two letter <a href="https://en.wikipedia.org/wiki/ISO_3166-1_alpha-2#Officially_assigned_code_elements">ISO 3166-1</a> code.</td>
</tr>
<tr>
<td>location[region]</td>
<td>null</td>
<td>string - optional - for efforts configured to use the &ldquo;by state&rdquo; search strategy, you can pass in the target state as a two letter state abbreviation.</td>
</tr>
</tbody></table>

<h3 id="working-example">Working Example</h3>

<p>View and edit a working example on codepen.io:</p>

<div class="js-codepen-data hidden"
  data-js_external="https://maps.googleapis.com/maps/api/js?key=AIzaSyAm5aA1UDKBL6dRD9yHPGydlZcBgzk6lsY&libraries=places"
  data-title="ControlShift Labs: List of Petitions in an Effort Example">
  <div class="codepen-html">
    <h1>Find the closest petitions to you</h1>
    <form>
      <input type="text" class="form-control" id="effort-lookup-input" placeholder="Enter your address or a nearby landmark">
      <small>Note: The above text field is auto-completed using the Google Maps <a href="https://developers.google.com/places/web-service/autocomplete" target="_blank">Autocomplete API</a></small>
    </form>
    <div id="petitions">
    </div>
  </div>
  <pre class="codepen-js">
    function buildPetition(target, description){
      output = '<h2><em>'+description+' Petition</em>: '+target.name+'</h2>';
      output += '<h3>'+target.location+'</h3> <ul>';
      output += '<li><strong>Title:</strong> '+target.petition.title+'</li>';
      output += '<li><strong>Who:</strong> '+target.petition.who+'</li>';
      output += '<li><strong>Goal:</strong> '+target.petition.goal+'</li>';
      output += '<li><strong>Signatures so far:</strong> '+target.petition.signature_count+'</li>';
      output += '</ul><hr/>';
      return output;
    }

    function getPetitionsCallback(place) {
      // Get the place details from the autocomplete object.
      var place = autocomplete.getPlace();

      // get the targets and petitions (if they exist) for the effort near the place specified.
      $.ajax({
        url: 'https://demo.controlshiftlabs.com/efforts/forecast-the-facts/lookup/query.json',
        dataType: 'jsonp',
        data: {
          'location[latitude]': place.geometry.location.lat(),
          'location[longitude]': place.geometry.location.lng()
        }
      })
      .done(function(data) {
        $placeholder = $('#petitions');
        if (data.code != undefined) {
          if ((data.code == 'no_nearby_targets') || (data.code == 'no_nearby_petitions')){
            $placeholder.html('<h2>No Petitions Found</h2>');
            return;
          } else if (data.code == 'location_required') {
            $placeholder.html('<h2>Location required</h2>');
            return;
          }
        }
        //populate closest target
        $placeholder.html( buildPetition(data.closest_target, 'Closest') );
        $.each(data.other_targets, function(index, other_petition){
          $placeholder.append( buildPetition(other_petition, 'Near By') );
        });
      });
    };

    $(document).ready(function(){
      $('form').on('submit', function(e){e.preventDefault()});
      var input = document.getElementById('effort-lookup-input');
      var options = { };
      autocomplete = new google.maps.places.Autocomplete(input, options);
      autocomplete.addListener('place_changed', getPetitionsCallback);
    });
  </pre>
</div>

<form action="https://codepen.io/pen/define" method="POST" target="_blank" class="hidden">
  <input type="hidden" name="data" class="js-data" value="">
  <input type="submit" value="Launch Example on CodePen">
</form>

          <h2 id="logged-in-user">Logged in user</h2>
<pre class="highlight javascript"><code><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
    <span class="na">url</span><span class="p">:</span> <span class="s1">'https://demo.controlshiftlabs.com/api/graph/me.json'</span><span class="p">,</span>
    <span class="na">dataType</span><span class="p">:</span> <span class="s1">'jsonp'</span><span class="p">,</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="nx">done</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</code></pre>
<blockquote>
<p>The above code would user details for a signed in user. The returned JSON would be structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"authenticated"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"me"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="s2">"John"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="s2">"Smith"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="s2">"john@smith.com"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"petitions"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"slug"</span><span class="p">:</span><span class="s2">"sample-campaign"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"title"</span><span class="p">:</span><span class="s2">"Sample Campaign"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"created_at"</span><span class="p">:</span><span class="s2">"2016-03-25T15:37:28Z"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="s2">"2016-03-25T15:37:35Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"events"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"slug"</span><span class="p">:</span><span class="s2">"sample-campaign"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"title"</span><span class="p">:</span><span class="s2">"Sample Campaign"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"created_at"</span><span class="p">:</span><span class="s2">"2016-03-25T15:37:28Z"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="s2">"2016-03-25T15:37:35Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"chapters"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
       </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"Brooklyn bruisers"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"slug"</span><span class="p">:</span><span class="s2">"brooklyn-bruisers"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"created_at"</span><span class="p">:</span><span class="s2">"2015-05-14T15:53:03Z"</span><span class="p">,</span><span class="w">
       </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="s2">"2016-03-25T15:40:44Z"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response for a visitor who is not logged in:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"not_authenticated"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message"</span><span class="p">:</span><span class="s2">"user is not signed in"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Response for a hostname that is not whitelisted:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"status"</span><span class="p">:</span><span class="s2">"error"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"errors"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"field"</span><span class="p">:</span><span class="s2">"referer"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"messages"</span><span class="p">:[</span><span class="w">
        </span><span class="s2">"host name not whitelisted"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>We provide a specialized jsonp endpoint to return information about the currently signed in user. Customers can use this endpoint to power features where information about the current user&rsquo;s petitions, sign in status, and other information about their account is displayed on external sites. Some examples of the sorts of functionality that this could be used to provide include:</p>

<ul>
<li>Conditionally show either a login link for unauthenticated users or a link to the user&rsquo;s my account page in the header of external pages.</li>
<li>Show information about a user&rsquo;s campaigns when someone visits an external site, or a prompt to start a campaign if the currently signed in user has none.</li>
<li>Show a direct link to a user&rsquo;s local group from an external site rather than linking to a generic search for your group page.</li>
</ul>

<aside class="notice">
You must whitelist your hostname prior to using this end point. Read more below.
</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://demo.controlshiftlabs.com/api/graph/me.json</code></p>

<h3 id="working-example">Working Example</h3>

<p>View and edit a working example on codepen.io.  Note: codepen.io is <em>whitelisted</em> for the demo account.</p>

<div class="js-codepen-data hidden" data-title="ControlShift Labs: Logged in User Example">
  <div class="codepen-html">
    <h1>Logged in User</h1>
    <p class="js-not-logged-in hidden">The user is not logged in.</p>
    <ul class="js-logged-in hidden">
      <li><strong>First Name:</strong> <span id="first_name"></span></li>
      <li><strong>First Name:</strong> <span id="last_name"></span></li>
      <li><strong>Email:</strong> <span id="email"></span></li>
      <li><strong>Petitions:</strong> <ul id="petitions"></ul></li>
      <li><strong>Events:</strong> <ul id="events"></ul></li>
      <li><strong>Chapters:</strong> <ul id="chapters"></ul></li>
    </ul>
  </div>
  <pre class="codepen-js">
    $(document).ready(function(){
      $.ajax({
        url: 'https://demo.controlshiftlabs.com/api/graph/me.json',
        dataType: 'jsonp',
      })
      .done(function(data) {
        if(data.status == 'authenticated'){
          // Populate data for logged in user
          $('#first_name').html(data.me.first_name);
          $('#last_name').html(data.me.last_name);
          $('#email').html(data.me.email);

          var $petitionsPlaceholder = $('#petitions');
          $.each(data.petitions, function(index, petition){
            $petitionsPlaceholder.append('<li>'+petition.title+'</li>');
          });

          var $eventsPlaceholder = $('#events');
          $.each(data.events, function(index, event){
            $eventsPlaceholder.append('<li>'+event.title+'</li>');
          });

          var $chaptersPlaceholder = $('#chapters');
          $.each(data.chapters, function(index, chapter){
            $chaptersPlaceholder.append('<li>'+chapter.name+'</li>');
          });

          $('.js-logged-in').removeClass('hidden');
        }else if(data.status == 'not_authenticated'){
          // Show "not logged in" for users who aren't logged in
          $('.js-not-logged-in').removeClass('hidden');
        }else if(data.status == 'error'){
          // Show known error messages
          $('body').append('<h2>Errors</h2><ul>')
          $.each(data.errors, function(index, error){
            $('body').append('<li><strong>'+error.field+'</strong> '+error.messages.join('; ')+'</li>')
          });
          $('body').append('</ul>')
        }
      });
    })
    .error(function(data){
      $('body').append('<h2>Errors</h2><p>Unknown Error</p>');
    });
  </pre>
</div>

<form action="https://codepen.io/pen/define" method="POST" target="_blank" class="hidden">
  <input type="hidden" name="data" class="js-data" value="">
  <input type="submit" value="Launch Example on CodePen">
</form>

<h3 id="whitelisting-a-hostname">Whitelisting a Hostname</h3>

<p>We authenticate requests to the current user endpoint by validating the hostname set in the HTTP referrer header against a whitelist. The whitelist is set of hostnames that scripts can be served from. If you request the endpoint from a script served from a non-whitelisted hostname you&rsquo;ll get an error message. This is necessary to prevent cross site scripting attacks that would allow someone to display logged in user information on unauthorized sites.</p>

<p>You can add hostnames to the whitelist through a self-serve interface in the &ldquo;Settings&rdquo; area of your instance. Settings &gt; Add Hostname &gt; enter a Hostname, and click save.</p>

<p>The hostname must be a hostname string like &ldquo;localhost&rdquo; &ldquo;www.google.com&rdquo; or the like. Wildcards or full HTTP URLs are not supported.</p>

<p>When you access the graph API endpoint from a page served from a whitelisted hostname the browser will automatically set a referrer header on those requests. We use this referrer header to validate the server the script was served from against the whitelist. You can verify that a whitelisted hostname is working properly with the curl command line tool:</p>

<p><code class="prettyprint">curl --referer http://localhost/ http://demo.controlshiftlabs.com/api/graph/me.json</code></p>

<p>The above should return a JSON blob indicating that the user is not signed in if localhost is whitelisted. Otherwise you&rsquo;ll get a not whitelisted error.</p>

<p>For authenticated users we currently return their first and last names, email addresses, and lists of petitions they&rsquo;ve created, events they&rsquo;ve created and local groups they are a member of.</p>

          <h1 id="webhook-endpoints">Webhook Endpoints</h1>

<p>Webhooks can be used by software engineers to integrate ControlShift with third-party systems. They allow engineers to build software that is triggered by events that take place within ControlShift. ControlShift would execute HTTP calls when certain event happen (e.g. a petition is launched; a category is changed).</p>

<p>To begin using these new webhooks, go to the admin homepage and click &ldquo;Settings&rdquo; under &ldquo;Manage.&rdquo; Then choose the &ldquo;CRM Integration &amp; Webhooks&rdquo; tab and click &ldquo;Configure Webhook Endpoints.&rdquo; To begin sending data, you&rsquo;ll need to add a &ldquo;New Webhook Endpoint.&rdquo; Each Webhook Endpoint URL receives a full firehose of all hooks that occur within ControlShift.</p>

<p>We recommend using a tool like <a href="http://requestb.in/">RequestBin</a> to help debug and develop your webhook integration. RequestBin allows engineers to see all of the webhooks generated by the application and sent to an endpoint.</p>

<p>If you need additional information about webhooks or how to use them, please send us a support email <a href="mailto:support@controlshiftlabs.com">support@controlshiftlabs.com</a>. We&rsquo;d also love stories about how customers are using webhooks.</p>

<h3 id="retries">Retries</h3>

<p>For webhook notifications successfully processed the response should have an HTTP 2XX status code. Responses returning a different status code will be marked as failed and automatically retried up to 9 times with an exponential backoff (e.g.: after 15s, 30s, 90s, etc.).</p>

<p>If after 9 retries the notification cannot be delivered, the webhook endpoint will be automatically disabled and will need to be re-enabled from the admin page to start receiving webhook notifications again.</p>

<h2 id="webhook-types-summary">Webhook types summary</h2>

<p>You can configure ControlShift Labs Webhooks to return the following event types:</p>

<table><thead>
<tr>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td><a href="#blast_email-created">blast_email.created</a></td>
<td>A new blast email is ready for moderation</td>
</tr>
<tr>
<td><a href="#category-created">category.created</a></td>
<td>A new category is created</td>
</tr>
<tr>
<td><a href="#category-updated">category.updated</a></td>
<td>A category is changed</td>
</tr>
<tr>
<td><a href="#category-deleted">category.deleted</a></td>
<td>A category has been deleted and removed from the organisation</td>
</tr>
<tr>
<td><a href="#data-full_table_exported">data.full_table_exported</a></td>
<td>A full-table dump is ready for retrieval at S3</td>
</tr>
<tr>
<td><a href="#data-incremental_table_exported">data.incremental_table_exported</a></td>
<td>An incremental CSV update is ready for retrieval at S3</td>
</tr>
<tr>
<td><a href="#event-created">event.created</a></td>
<td>A new event is published</td>
</tr>
<tr>
<td><a href="#event-updated">event.updated</a></td>
<td>An event is updated</td>
</tr>
<tr>
<td><a href="#attendee-created">attendee.created</a></td>
<td>Member RSVP to event</td>
</tr>
<tr>
<td><a href="#attendee-updated">attendee.updated</a></td>
<td>Member updates RSVP to event</td>
</tr>
<tr>
<td><a href="#attendee-deleted">attendee.deleted</a></td>
<td>Attendee permanently deleted. This is currently only triggered when a member deletes its account.</td>
</tr>
<tr>
<td><a href="#flag-created">flag.created</a></td>
<td>Someone flags a problem for admin attention</td>
</tr>
<tr>
<td><a href="#local_chapter-created">local_chapter.created</a></td>
<td>A local group has been created.</td>
</tr>
<tr>
<td><a href="#local_chapter-last_organiser-deleted">local_chapter.last_organiser.deleted</a></td>
<td>A local chapter&rsquo;s last organiser leaves the group</td>
</tr>
<tr>
<td><a href="#local_chapter-organiser_request-created">local_chapter.organiser_request.created</a></td>
<td>A user applies to be a local chapter organiser</td>
</tr>
<tr>
<td><a href="#local_chapter-organiser_request-approved">local_chapter.organiser_request.approved</a></td>
<td>An admin approves a user&rsquo;s application to be a local chapter organiser</td>
</tr>
<tr>
<td><a href="#local_chapter-member-created">local_chapter.member.created</a></td>
<td>A member joins a local chapter</td>
</tr>
<tr>
<td><a href="#local_chapter-member-deleted">local_chapter.member.deleted</a></td>
<td>A member leaves or is removed from a local chapter</td>
</tr>
<tr>
<td><a href="#member-deleted">member.deleted</a></td>
<td>A member is deleted</td>
</tr>
<tr>
<td><a href="#member-deleted-resources_transferred">member.deleted.resources_transferred</a></td>
<td>Resources previously owned by a deleted member have been transferred to another</td>
</tr>
<tr>
<td><a href="#petition-ended">petition.ended</a></td>
<td>A petition is marked as won, lost, or ended for another reason</td>
</tr>
<tr>
<td><a href="#petition-flagged">petition.flagged</a></td>
<td>A petition is flagged for the first or fifth time</td>
</tr>
<tr>
<td><a href="#petition-inappropriate-creator_message">petition.inappropriate.creator_message</a></td>
<td>An inappropriate petition&rsquo;s creator writes a message to admins</td>
</tr>
<tr>
<td><a href="#petition-launched">petition.launched</a></td>
<td>A new petition is launched</td>
</tr>
<tr>
<td><a href="#petition-launched-ham">petition.launched.ham</a></td>
<td>A petition passes the post-launch spam check</td>
</tr>
<tr>
<td><a href="#petition-launched-requires_moderation">petition.launched.requires_moderation</a></td>
<td>A new petition requires moderation</td>
</tr>
<tr>
<td><a href="#petition-reactivated">petition.reactivated</a></td>
<td>A hidden or ended petition is reactivated</td>
</tr>
<tr>
<td><a href="#petition-updated">petition.updated</a></td>
<td>A petition is updated</td>
</tr>
<tr>
<td><a href="#petition-updated-requires_moderation">petition.updated.requires_moderation</a></td>
<td>An updated petition requires moderation</td>
</tr>
<tr>
<td><a href="#petition-target-response">petition.target.response</a></td>
<td>Decision maker responded to a petition notification</td>
</tr>
<tr>
<td><a href="#user-created">user.created</a></td>
<td>New user created.</td>
</tr>
<tr>
<td><a href="#user-confirmed">user.confirmed</a></td>
<td>User has confirmed its new account. This event is only emitted for organisations who have user confirmation turned on.</td>
</tr>
<tr>
<td><a href="#user-changed">user.changed</a></td>
<td>A user has changed their saved first_name, last_name, postcode, locale  or email opt-in type.</td>
</tr>
<tr>
<td><a href="#user-updated">user.updated</a></td>
<td>A user is updated.</td>
</tr>
<tr>
<td><a href="#signature-created">signature.created</a></td>
<td>Member signs a petition</td>
</tr>
<tr>
<td><a href="#signature-updated">signature.updated</a></td>
<td>Existing signature updated. This can happen when member unsubscribes or reasserts their opt in for receiving emails</td>
</tr>
<tr>
<td><a href="#signature-deleted">signature.deleted</a></td>
<td>Signature permanently deleted. Signature deletions are distinct from unsubscribes and should be treated as if the signature never happened</td>
</tr>
<tr>
<td><a href="#signature-confirmed">signature.confirmed</a></td>
<td></td>
</tr>
<tr>
<td><a href="#unsubscribe-created">unsubscribe.created</a></td>
<td>Member unsubscribes. This notification is emitted when member: is globally unsubscribed from the organisation by an admin or through the API, unsubscribes from partnership or unsubscribes from a petition.</td>
</tr>
<tr>
<td><a href="#locale-created">locale.created</a></td>
<td>New i18n instance created</td>
</tr>
<tr>
<td><a href="#forum-message-requires_moderation">forum.message.requires_moderation</a></td>
<td>A new message requires moderation</td>
</tr>
</tbody></table>

<h2 id="blast_email-created">blast_email.created</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">blast_email.created</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"blast_email.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane Doe"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jane@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Please help spread the word"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"recipient_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">990</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A new blast email is ready for moderation</p>

<h2 id="category-created">category.created</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">category.created</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"category.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Environment"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"environment"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T12:38:46Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T12:38:46Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"df67126973794c2efde76cc4"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A new category is created</p>

<h2 id="category-updated">category.updated</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">category.updated</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"category.updated"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Environment"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"environment"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T12:38:46Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T12:38:46Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"df67126973794c2efde76cc4"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A category is changed</p>

<h2 id="category-deleted">category.deleted</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">category.deleted</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"category.deleted"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Environment"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"environment"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T12:38:46Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T12:38:46Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"df67126973794c2efde76cc4"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A category has been deleted and removed from the organisation</p>

<h2 id="data-full_table_exported">data.full_table_exported</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">data.full_table_exported</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"data.full_table_exported"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://agra-data-exports.s3.amazonaws.com/default/petitions_20150803180434.csv?AWSAccessKeyId=XXX&amp;Expires=1438711490&amp;Signature=ABCDE%3D"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"petitions"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cf0f50d7d225e20a188be328"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A full-table dump is ready for retrieval at S3</p>

<p><p>
<b>Note</b>
URL is encoded using (7-bit) ASCII and some characters will be escaped (i.e.: &lsquo;&amp;&rsquo;, &lsquo;&lt;&rsquo;, &lsquo;&gt;&rsquo;, etc.). See <a target="blank" href="http://www.rubydoc.info/gems/activesupport/3.2.22/ActiveSupport/JSON/Encoding">http://www.rubydoc.info/gems/activesupport/3.2.22/ActiveSupport/JSON/Encoding</a> for more details
</p></p>

<h2 id="data-incremental_table_exported">data.incremental_table_exported</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">data.incremental_table_exported</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"data.incremental_table_exported"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://agra-data-exports.s3.amazonaws.com/default/petitions_20150803180434.csv?AWSAccessKeyId=XXX&amp;Expires=1438711490&amp;Signature=ABCDE%3D"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"table"</span><span class="p">:</span><span class="w"> </span><span class="s2">"petitions"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cf0f50d7d225e20a188be328"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>An incremental CSV update is ready for retrieval at S3</p>

<p><p>
<b>Note</b>
URL is encoded using (7-bit) ASCII and some characters will be escaped (i.e.: &lsquo;&amp;&rsquo;, &lsquo;&lt;&rsquo;, &lsquo;&gt;&rsquo;, etc.). See <a target="blank" href="http://www.rubydoc.info/gems/activesupport/3.2.22/ActiveSupport/JSON/Encoding">http://www.rubydoc.info/gems/activesupport/3.2.22/ActiveSupport/JSON/Encoding</a> for more details
</p></p>

<h2 id="event-created">event.created</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">event.created</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"event.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"petition-hand-in"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Petition Hand In"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/events/petition-hand-in"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A new event is published</p>

<h2 id="event-updated">event.updated</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">event.updated</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"event.updated"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"petition-hand-in"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Petition Hand In"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/events/petition-hand-in"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>An event is updated</p>

<h2 id="attendee-created">attendee.created</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">attendee.created</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"attendee.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">645</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jenny@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23456"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attending_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"attending"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_organisation"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_group"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"email_opt_in_type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_form"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pre_checked_checkbox"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mailable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd12345"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"eu_data_processing_consent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consent_content_version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc345"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"consent_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"explicit"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"member"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">747</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost/events/meetup-at-park"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"meetup-at-park"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Member RSVP to event</p>

<h2 id="attendee-updated">attendee.updated</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">attendee.updated</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"attendee.updated"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">645</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jenny@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23456"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attending_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"attending"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_organisation"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_group"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"email_opt_in_type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_form"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pre_checked_checkbox"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mailable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd12345"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"eu_data_processing_consent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consent_content_version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc345"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"consent_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"explicit"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"member"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">747</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost/events/meetup-at-park"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"meetup-at-park"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Member updates RSVP to event</p>

<h2 id="attendee-deleted">attendee.deleted</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">attendee.deleted</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"attendee.deleted"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">645</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jenny@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23456"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"attending_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"attending"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_organisation"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_group"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"email_opt_in_type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_form"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pre_checked_checkbox"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mailable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd12345"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"eu_data_processing_consent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consent_content_version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc345"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"consent_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"explicit"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"member"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">747</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost/events/meetup-at-park"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"meetup-at-park"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Attendee permanently deleted. This is currently only triggered when a member deletes its account.</p>

<h2 id="flag-created">flag.created</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">flag.created</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"flag.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
    </span><span class="s2">"flagged"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ForumMessage"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">224</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"flagged_by"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bobby@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bobby Singer"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This violates our community commitments"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unreviewed"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-05T13:17:46Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-05T13:17:46Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f848f4b38b9125f7089d59ad"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Someone flags a problem for admin attention</p>

<p><p>For example, a local chapter organiser flags a forum message.</p></p>

<h2 id="local_chapter-created">local_chapter.created</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">local_chapter.created</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local_chapter.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"springfield-members"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Springfield Members"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/local_chapters/springfield-members"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A local group has been created.</p>

<h2 id="local_chapter-last_organiser-deleted">local_chapter.last_organiser.deleted</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">local_chapter.last_organiser.deleted</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local_chapter.last_organiser.deleted"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"springfield-members"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Springfield Members"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/local_chapters/springfield-members"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A local chapter&rsquo;s last organiser leaves the group</p>

<h2 id="local_chapter-organiser_request-created">local_chapter.organiser_request.created</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">local_chapter.organiser_request.created</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local_chapter.organiser_request.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"local_chapter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"springfield-members"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Springfield Members"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/local_chapters/springfield-members"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">505</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jane@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane Goodall"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goodall"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34058-2356"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I want to be part of this amazing group"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T12:38:46Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A user applies to be a local chapter organiser</p>

<h2 id="local_chapter-organiser_request-approved">local_chapter.organiser_request.approved</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">local_chapter.organiser_request.approved</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local_chapter.organiser_request.approved"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"local_chapter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"springfield-members"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Springfield Members"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/local_chapters/springfield-members"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">505</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jane@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane Goodall"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goodall"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34058-2356"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I want to be part of this amazing group"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T12:38:46Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>An admin approves a user&rsquo;s application to be a local chapter organiser</p>

<h2 id="local_chapter-member-created">local_chapter.member.created</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">local_chapter.member.created</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local_chapter.member.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jenny@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23456"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"introduction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I want to save the world!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"notification_level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all_messages"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"local_chapter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"springfield-members"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Springfield Members"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/local_chapters/springfield-members"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"eu_data_processing_consent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consent_content_version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc345"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"consent_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"explicit"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A member joins a local chapter</p>

<h2 id="local_chapter-member-deleted">local_chapter.member.deleted</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">local_chapter.member.deleted</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"local_chapter.member.deleted"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jenny@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23456"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"introduction"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I want to save the world!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"notification_level"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all_messages"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"local_chapter"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"springfield-members"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Springfield Members"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/local_chapters/springfield-members"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"eu_data_processing_consent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consent_content_version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc345"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"consent_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"explicit"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A member leaves or is removed from a local chapter</p>

<h2 id="member-deleted">member.deleted</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">member.deleted</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"member.deleted"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"member"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jane@example.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"new_owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">888</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"richard@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Richard Chamberlain"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Richard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Chamberlain"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345-1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34058-2356"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A member is deleted</p>

<h2 id="member-deleted-resources_transferred">member.deleted.resources_transferred</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">member.deleted.resources_transferred</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"member.deleted.resources_transferred"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"member"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jane@example.com"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"resources"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"new_owner"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">888</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"richard@example.com"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Richard Chamberlain"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Richard"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Chamberlain"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345-1"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34058-2356"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Resources previously owned by a deleted member have been transferred to another</p>

<h2 id="petition-ended">petition.ended</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">petition.ended</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"petition.ended"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Don't destroy our park!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/hero/imag0945.jpg?1438621934"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/form/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"large"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/large/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/open_graph/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/original/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Anytown City Council"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The park on Main Street is an important community space.  Don't approve the proposal to sell it to office building developers."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agra.user.adm@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34058-2356"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en-US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:11:02Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:12:15Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Studies have shown that green space is important to child development and community well-being."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"won"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won the campaign! The Main Street park will be protected for years to come."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"successful"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_story"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won! Thanks to your support, the city council has agreed to protect the Main Street park from development."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9fccc1957d7d7ebc93fb0f05"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A petition is marked as won, lost, or ended for another reason</p>

<h2 id="petition-flagged">petition.flagged</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">petition.flagged</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"petition.flagged"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Don't destroy our park!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/hero/imag0945.jpg?1438621934"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/form/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"large"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/large/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/open_graph/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/original/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Anytown City Council"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The park on Main Street is an important community space.  Don't approve the proposal to sell it to office building developers."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agra.user.adm@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34058-2356"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en-US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:11:02Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:12:15Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Studies have shown that green space is important to child development and community well-being."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"won"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won the campaign! The Main Street park will be protected for years to come."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"successful"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_story"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won! Thanks to your support, the city council has agreed to protect the Main Street park from development."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9fccc1957d7d7ebc93fb0f05"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A petition is flagged for the first or fifth time</p>

<h2 id="petition-inappropriate-creator_message">petition.inappropriate.creator_message</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">petition.inappropriate.creator_message</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"petition.inappropriate.creator_message"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Don't destroy our park!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/hero/imag0945.jpg?1438621934"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/form/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"large"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/large/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/open_graph/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/original/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Anytown City Council"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The park on Main Street is an important community space.  Don't approve the proposal to sell it to office building developers."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agra.user.adm@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34058-2356"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en-US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:11:02Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:12:15Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Studies have shown that green space is important to child development and community well-being."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"won"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won the campaign! The Main Street park will be protected for years to come."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"successful"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_story"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won! Thanks to your support, the city council has agreed to protect the Main Street park from development."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9fccc1957d7d7ebc93fb0f05"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>An inappropriate petition&rsquo;s creator writes a message to admins</p>

<h2 id="petition-launched">petition.launched</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">petition.launched</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"petition.launched"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Don't destroy our park!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/hero/imag0945.jpg?1438621934"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/form/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"large"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/large/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/open_graph/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/original/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Anytown City Council"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The park on Main Street is an important community space.  Don't approve the proposal to sell it to office building developers."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agra.user.adm@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34058-2356"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en-US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:11:02Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:12:15Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Studies have shown that green space is important to child development and community well-being."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"won"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won the campaign! The Main Street park will be protected for years to come."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"successful"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_story"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won! Thanks to your support, the city council has agreed to protect the Main Street park from development."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9fccc1957d7d7ebc93fb0f05"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A new petition is launched</p>

<h2 id="petition-launched-ham">petition.launched.ham</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">petition.launched.ham</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"petition.launched.ham"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Don't destroy our park!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/hero/imag0945.jpg?1438621934"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/form/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"large"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/large/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/open_graph/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/original/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Anytown City Council"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The park on Main Street is an important community space.  Don't approve the proposal to sell it to office building developers."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agra.user.adm@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34058-2356"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en-US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:11:02Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:12:15Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Studies have shown that green space is important to child development and community well-being."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"won"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won the campaign! The Main Street park will be protected for years to come."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"successful"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_story"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won! Thanks to your support, the city council has agreed to protect the Main Street park from development."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9fccc1957d7d7ebc93fb0f05"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A petition passes the post-launch spam check</p>

<h2 id="petition-launched-requires_moderation">petition.launched.requires_moderation</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">petition.launched.requires_moderation</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"petition.launched.requires_moderation"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Don't destroy our park!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/hero/imag0945.jpg?1438621934"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/form/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"large"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/large/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/open_graph/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/original/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Anytown City Council"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The park on Main Street is an important community space.  Don't approve the proposal to sell it to office building developers."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agra.user.adm@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34058-2356"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en-US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:11:02Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:12:15Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Studies have shown that green space is important to child development and community well-being."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"won"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won the campaign! The Main Street park will be protected for years to come."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"successful"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_story"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won! Thanks to your support, the city council has agreed to protect the Main Street park from development."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9fccc1957d7d7ebc93fb0f05"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A new petition requires moderation</p>

<h2 id="petition-reactivated">petition.reactivated</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">petition.reactivated</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"petition.reactivated"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Don't destroy our park!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/hero/imag0945.jpg?1438621934"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/form/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"large"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/large/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/open_graph/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/original/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Anytown City Council"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The park on Main Street is an important community space.  Don't approve the proposal to sell it to office building developers."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agra.user.adm@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34058-2356"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en-US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:11:02Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:12:15Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Studies have shown that green space is important to child development and community well-being."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"won"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won the campaign! The Main Street park will be protected for years to come."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"successful"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_story"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won! Thanks to your support, the city council has agreed to protect the Main Street park from development."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9fccc1957d7d7ebc93fb0f05"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A hidden or ended petition is reactivated</p>

<h2 id="petition-updated">petition.updated</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">petition.updated</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"petition.updated"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Don't destroy our park!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/hero/imag0945.jpg?1438621934"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/form/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"large"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/large/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/open_graph/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/original/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Anytown City Council"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The park on Main Street is an important community space.  Don't approve the proposal to sell it to office building developers."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agra.user.adm@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34058-2356"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en-US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:11:02Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:12:15Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Studies have shown that green space is important to child development and community well-being."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"won"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won the campaign! The Main Street park will be protected for years to come."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"successful"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_story"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won! Thanks to your support, the city council has agreed to protect the Main Street park from development."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9fccc1957d7d7ebc93fb0f05"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A petition is updated</p>

<h2 id="petition-updated-requires_moderation">petition.updated.requires_moderation</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">petition.updated.requires_moderation</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"petition.updated.requires_moderation"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Don't destroy our park!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/hero/imag0945.jpg?1438621934"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/form/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"large"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/large/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/open_graph/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/original/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Anytown City Council"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The park on Main Street is an important community space.  Don't approve the proposal to sell it to office building developers."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agra.user.adm@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34058-2356"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en-US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:11:02Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:12:15Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Studies have shown that green space is important to child development and community well-being."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"won"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won the campaign! The Main Street park will be protected for years to come."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"successful"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_story"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won! Thanks to your support, the city council has agreed to protect the Main Street park from development."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9fccc1957d7d7ebc93fb0f05"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>An updated petition requires moderation</p>

<h2 id="petition-target-response">petition.target.response</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">petition.target.response</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"petition.target.response"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Don't destroy our park!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/hero/imag0945.jpg?1438621934"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_image_sizes_url"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"form"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/form/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"large"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/large/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"open_graph"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/open_graph/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"style"</span><span class="p">:</span><span class="w"> </span><span class="s2">"original"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://d34smfggpfnvat.cloudfront.net/petitions/images/788/original/imag0945.jpg?1438621934"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Anytown City Council"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The park on Main Street is an important community space.  Don't approve the proposal to sell it to office building developers."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w">
    </span><span class="s2">"signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"creator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"agra.user.adm@gmail.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tyshawn"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Morissette"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"12345-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34058-2356"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en-US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:11:02Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:12:15Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Studies have shown that green space is important to child development and community well-being."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"won"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won the campaign! The Main Street park will be protected for years to come."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"successful"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_story"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We won! Thanks to your support, the city council has agreed to protect the Main Street park from development."</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"9fccc1957d7d7ebc93fb0f05"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Decision maker responded to a petition notification</p>

<h2 id="user-created">user.created</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">user.created</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jenny@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123-456"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101010"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_organisation"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email_opt_in_type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_form"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pre_checked_checkbox"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mailable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd12345"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"eu_data_processing_consent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consent_content_version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc345"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"consent_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"explicit"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>New user created.</p>

<h2 id="user-confirmed">user.confirmed</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">user.confirmed</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user.confirmed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jenny@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123-456"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101010"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_organisation"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email_opt_in_type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_form"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pre_checked_checkbox"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mailable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd12345"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"eu_data_processing_consent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consent_content_version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc345"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"consent_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"explicit"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>User has confirmed its new account. This event is only emitted for organisations who have user confirmation turned on.</p>

<h2 id="user-changed">user.changed</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">user.changed</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user.changed"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo@bar.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"changes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"Nate"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Nathan"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"email_opt_in_type"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_form"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pre_checked_checkbox"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"mailable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_form"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unchecked_checkbox"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"mailable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A user has changed their saved first_name, last_name, postcode, locale  or email opt-in type.</p>

<h2 id="user-updated">user.updated</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">user.updated</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user.updated"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">180</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jenny@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"123-456"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"101010"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_organisation"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email_opt_in_type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_form"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pre_checked_checkbox"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mailable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd12345"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"eu_data_processing_consent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consent_content_version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc345"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"changes"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"Nate"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"Nathan"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"email_opt_in_type"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_form"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pre_checked_checkbox"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"mailable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
          </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_form"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unchecked_checkbox"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"mailable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
          </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A user is updated.</p>

<h2 id="signature-created">signature.created</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">signature.created</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signature.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">645</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jenny@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23456"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country_without_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_organisation"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_group"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2919ec5f25d493c19690a21135d7fd902a336927"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bucket"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/43.0.2357.130 Chrome/43.0.2357.130 Safari/537.36"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from_embed"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmed_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_signed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"email_opt_in_type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_form"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pre_checked_checkbox"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mailable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd12345"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"eu_data_processing_consent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consent_content_version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc345"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"consent_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"explicit"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"member"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">747</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"petition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost/petitions/don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-t-destroy-our-park"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1ebf2eb10c3d8939f42dff68"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Member signs a petition</p>

<p><p>We also include optional partnership or effort slugs nested under the petition resource for signatures that take place on petitions associated with those objects.</p></p>

<h2 id="signature-updated">signature.updated</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">signature.updated</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signature.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">645</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jenny@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23456"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country_without_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_organisation"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_group"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2919ec5f25d493c19690a21135d7fd902a336927"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bucket"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/43.0.2357.130 Chrome/43.0.2357.130 Safari/537.36"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from_embed"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmed_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_signed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"email_opt_in_type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_form"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pre_checked_checkbox"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mailable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd12345"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"eu_data_processing_consent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consent_content_version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc345"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"consent_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"explicit"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"member"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">747</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"petition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost/petitions/don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-t-destroy-our-park"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1ebf2eb10c3d8939f42dff68"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Existing signature updated. This can happen when member unsubscribes or reasserts their opt in for receiving emails</p>

<p><p>We also include optional partnership or effort slugs nested under the petition resource for signatures that take place on petitions associated with those objects.</p></p>

<h2 id="signature-deleted">signature.deleted</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">signature.deleted</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signature.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">645</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jenny@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23456"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country_without_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_organisation"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_group"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2919ec5f25d493c19690a21135d7fd902a336927"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bucket"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/43.0.2357.130 Chrome/43.0.2357.130 Safari/537.36"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from_embed"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmed_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_signed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"email_opt_in_type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_form"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pre_checked_checkbox"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mailable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd12345"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"eu_data_processing_consent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consent_content_version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc345"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"consent_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"explicit"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"member"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">747</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"petition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost/petitions/don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-t-destroy-our-park"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1ebf2eb10c3d8939f42dff68"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Signature permanently deleted. Signature deletions are distinct from unsubscribes and should be treated as if the signature never happened</p>

<p><p>We also include optional partnership or effort slugs nested under the petition resource for signatures that take place on petitions associated with those objects.</p></p>

<h2 id="signature-confirmed">signature.confirmed</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">signature.confirmed</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"signature.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">645</span><span class="p">,</span><span class="w">
    </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jennifer"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Goines"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jenny@example.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"postcode"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23456"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"country_without_fallback"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_organisation"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"join_group"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"token"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2919ec5f25d493c19690a21135d7fd902a336927"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"bucket"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_ip"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user_agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Ubuntu Chromium/43.0.2357.130 Chrome/43.0.2357.130 Safari/537.36"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"from_embed"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmed_at"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"confirmed_reason"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"last_signed_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"additional_fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"email_opt_in_type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_form"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pre_checked_checkbox"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"mailable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcd12345"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"eu_data_processing_consent"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"consent_content_version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
      </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc345"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"consent_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"explicit"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"member"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">747</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"petition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost/petitions/don-t-destroy-our-park"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"don-t-destroy-our-park"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:30:01Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1ebf2eb10c3d8939f42dff68"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p><p>We also include optional partnership or effort slugs nested under the petition resource for signatures that take place on petitions associated with those objects.</p></p>

<h2 id="unsubscribe-created">unsubscribe.created</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">unsubscribe.created</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unsubscribe.created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"river@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unsubscribe_organisation"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unsubscribable_type"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:38:49Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unsubscribe.created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"river@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unsubscribe_organisation"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unsubscribable_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"PartnershipSubscription"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:38:49Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unsubscribe.created"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"river@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unsubscribe_organisation"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
      </span><span class="s2">"unsubscribable_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Signature"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T13:38:49Z"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"blast_email"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">199</span><span class="p">,</span><span class="w">
        </span><span class="s2">"subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Please help spread the word"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"030ee43a4fa9788e084d9cfc"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
<p>Member unsubscribes. This notification is emitted when member: is globally unsubscribed from the organisation by an admin or through the API, unsubscribes from partnership or unsubscribes from a petition.</p>

<p><p>
First example: Admin globally unsubscribes a member from the member page
</p>
<p>
Second example: Member unsubscribes from partnership
<br>
<span>
<strong>Note:</strong>
<strong>unsubscribe_organisation</strong>
can have true or false values depending on member&rsquo;s input at the unsubscribe page (only if the
<em>Allow global unsubscribes</em>
option is enabled for the organisation)
</span>
</p>
<p>
Third example: Member unsubscribes from petition
<br>
<span>
<strong>Notes:</strong>
<br>
<strong>unsubscribe_organisation</strong>
can have true or false values depending on member&rsquo;s input at the unsubscribe page (only if the
<em>Allow global unsubscribes</em>
option is enabled for the organisation)
<br>
The
<strong>blast_email</strong>
property will only be included if member unsubscribed by clicking on the link included on the petition blast email&rsquo;s footer
</span>
</p></p>

<h2 id="locale-created">locale.created</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">locale.created</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"locale.created"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"es"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"action_kit_external_id"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T12:38:46Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-03T12:38:46Z"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"df67126973794c2efde76cc4"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>New i18n instance created</p>

<h2 id="forum-message-requires_moderation">forum.message.requires_moderation</h2>

<blockquote>
<p>Example payload for <code class="prettyprint">forum.message.requires_moderation</code>:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="w">  </span><span class="p">{</span><span class="w">
  </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"forum.message.requires_moderation"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
    </span><span class="s2">"thread_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello everyone"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"content"</span><span class="p">:</span><span class="w"> </span><span class="s2">"I just wanted to say hi"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unreviewed"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"sent_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-05T13:17:46Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"member"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">10829</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-08-05T13:17:46Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"discussable"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"discussable_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"LocalChapter"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"discussable_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">56</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="s2">"jid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"f848f4b38b9125f7089d59ad"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A new message requires moderation</p>

<p><div class='mt10'>
<b>Note</b>
<div>
The <strong>admin_status</strong> field can take any of the following values:
<ul>
<li>
<em>unreviewed</em>
</li>
<li>
<em>flagged</em>
</li>
<li>
<em>approved_automatically</em>
</li>
<li>
<em>approved_manually</em>
</li>
<li>
<em>flagged_deleted</em>
</li>
<li>
<em>inappropriate</em>
</li>
</ul>
Though on the <em>forum.message.requires_moderation</em> notification type it will always be set to <em>unreviewed</em>
</div>
<div class='mt5'>
The <strong>discussable.discussable_type</strong> field can take any of the following values:
<ul>
<li>
<em>LocalChapter</em>
</li>
<li>
<em>Event</em>
</li>
<li>
<em>CalendarEvent</em>
</li>
<li>
<em>LocalChapterEvent</em>
</li>
<li>
<em>PetitionEvent</em>
</li>
</ul>
</div>
</div></p>

          <h1 id="bulk-data">Bulk Data</h1>

<p>ControlShift&rsquo;s Bulk Data Webhooks make it easy to pull your data into external services.</p>

<h2 id="webhooks">Webhooks</h2>

<p>We provides two special bulk data webhooks to help you keep an external reporting or analytics database server up to date with information from ControlShift&rsquo;s internal tables. The <a href="#data-full_table_exported">data.full_table_exported</a> and <a href="#data-incremental_table_exported">data.incremental_table_exported</a> webhooks can be consumed to keep an external database mirror containing ControlShift data up to date. This service was built in a database agnostic way, but it should be possible to build a ControlShift -&gt; Amazon Redshift data pipeline using the <a href="#controlshift-to-redshift-pipeline">ControlShift to Redshift Pipeline</a> technique outlines below.</p>

<aside class="notice">
Bulk data webhooks should be automatically included when adding a new webhook endpoint. Please contact support to report any issues with bulk data webhook generation. For testing, you can manually trigger these wehbooks by visiting <code>https://&lt;your controlshift instance&gt;/orgs/export</code> and clicking on &ldquo;New Full Tables Data Export.&rdquo;
</aside>

<h2 id="bulk-data-data-schemas">Bulk Data Data Schemas</h2>

<p>The bulk data webhooks include exports of the following tables.  You can use the links to download CSV headers or a psql schema for each table.</p>

<ul>
<li><code class="prettyprint">attendees</code> - <a href="data/attendees_headers.csv">csv headers</a>/<a href="data/attendees_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">blast_emails</code> - <a href="data/blast_emails_headers.csv">csv headers</a>/<a href="data/blast_emails_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">calendars</code> - <a href="data/calendars_headers.csv">csv headers</a>/<a href="data/calendars_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">categories</code> - <a href="data/categories_headers.csv">csv headers</a>/<a href="data/categories_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">categorized_petitions</code> - <a href="data/categorized_petitions_headers.csv">csv headers</a>/<a href="data/categorized_petitions_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">comments</code> - <a href="data/comments_headers.csv">csv headers</a>/<a href="data/comments_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">consent_content_versions</code> - <a href="data/consent_content_versions_headers.csv">csv headers</a>/<a href="data/consent_content_versions_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">data_processing_consents</code> - <a href="data/data_processing_consents_headers.csv">csv headers</a>/<a href="data/data_processing_consents_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">email_opt_in_types</code> - <a href="data/email_opt_in_types_headers.csv">csv headers</a>/<a href="data/email_opt_in_types_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">events</code> - <a href="data/events_headers.csv">csv headers</a>/<a href="data/events_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">local_chapter_members</code> - <a href="data/local_chapter_members_headers.csv">csv headers</a>/<a href="data/local_chapter_members_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">local_chapters</code> - <a href="data/local_chapters_headers.csv">csv headers</a>/<a href="data/local_chapters_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">locations</code> - <a href="data/locations_headers.csv">csv headers</a>/<a href="data/locations_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">members</code> - <a href="data/members_headers.csv">csv headers</a>/<a href="data/members_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">petitions</code> - <a href="data/petitions_headers.csv">csv headers</a>/<a href="data/petitions_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">signatures</code> - <a href="data/signatures_headers.csv">csv headers</a>/<a href="data/signatures_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">unsubscribes</code> - <a href="data/unsubscribes_headers.csv">csv headers</a>/<a href="data/unsubscribes_schema.sql">sql_schema</a></li>
<li><code class="prettyprint">users</code> - <a href="data/users_headers.csv">csv headers</a>/<a href="data/users_schema.sql">sql_schema</a></li>
</ul>

<p>Additional files:</p>

<ul>
<li>combined schema - <a href="data/CS_combined_schema.sql">CS_combined_schema.sql</a></li>
<li>zip of all schema files <a href="data/CS_data_assets.zip">CS_data_assets.zip</a></li>
</ul>

<h2 id="controlshift-to-redshift-pipeline">ControlShift to Redshift Pipeline</h2>

<p>Setting up an Amazon Redshift integration should take one to two hours. We&rsquo;ll use a custom <a href="http://docs.aws.amazon.com/lambda/latest/dg/welcome.html">AWS Lamda</a> to receive data from ControlShift&rsquo;s webhook and Amazon&rsquo;s <a href="https://github.com/awslabs/aws-lambda-redshift-loader">Lamda Redshift Loader</a> to load our data into Redshift. For this example, we&rsquo;ll focus on the daily full_table dump, and truncating the previous days data for petitions only. You could also add a second pipeline to add incremental data if you need more frequent updates.</p>

<p>As of this writing, aws-lambda-redshift-loader v2.4.0 only supports a single configuration per Lambda.  This means you&rsquo;ll have to setup a separate Lambda for every table you want to capture. If you want to capture both nightly and incremental dumps, you&rsquo;ll also need to set up one nightly lambda and one incremental lambda per table you want to capture. It can be a little tedious, but remember, the first one is the hardest!</p>

<h3 id="example-flow">Example Flow</h3>

<p><img src="images/ControlShift_Redshift_flow_transparent.svg" alt="ControlShift Redshift Flow Chart" /></p>

<h3 id="redshift-pipeline-setup">Redshift Pipeline Setup</h3>

<p>The core steps to get this up and running are:</p>

<ol>
<li>Setting up S3 buckets to retain file storage</li>
<li>Setting up your custom lambda webhook receiver</li>
<li>Setting up your Redshift database cluster and pre-loading a schema.</li>
<li>Setting up your <code class="prettyprint">aws-lambda-redshift-loader</code> lambda.</li>
<li>Configure your bulk data webhook in the Control Shift settings console.</li>
</ol>

<p><strong>Note:</strong> All resources should be set up in the same AWS region (e.g.: us-east-1) so they can access each other. &ldquo;US Standard&rdquo; and &ldquo;us-east-1&rdquo; are the same thing.</p>

<p><strong>Before starting:</strong> You&rsquo;ll need git, npm, and access to a PostgreSQL connection tool, such as <code class="prettyprint">psql</code> on the command line (Redshift is based on PostgreSQL).</p>

<p>These instructions were prepared for aws-lambda-redshift-loader v2.4.0.</p>

<hr>

<h3 id="setting-up-s3-buckets">Setting Up S3 Buckets</h3>

<ol>
<li>Login to you AWS console and create two s3 buckets for future use.

<ol>
<li>controlshift-receiver - will hold received csv files</li>
<li>controlshift-manifests - will hold resulting manifest files from your aws-lambda-redshift-loader</li>
</ol></li>
<li>That&rsquo;s it. You&rsquo;re done here.</li>
</ol>

<hr>

<h3 id="setting-up-custom-lambda-receiver">Setting Up Custom Lambda Receiver</h3>

<blockquote>
<p>Lambda Receiver Code</p>
</blockquote>
<pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">https</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'https'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">url</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'url'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">AWS</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'aws-sdk'</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">csvReceiver</span><span class="p">(</span><span class="nx">downloadUrl</span><span class="p">,</span> <span class="nx">eventContext</span><span class="p">,</span> <span class="nx">webhookJSON</span><span class="p">){</span>
  <span class="kd">var</span> <span class="nx">targetBucket</span> <span class="o">=</span> <span class="s1">'controlshift-receiver'</span><span class="p">,</span> <span class="c1">// receiver bucket name</span>
    <span class="nx">s3</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">AWS</span><span class="p">.</span><span class="nx">S3</span><span class="p">(),</span>
    <span class="nx">firstLineRemoved</span> <span class="o">=</span> <span class="kc">false</span><span class="p">,</span>
    <span class="nx">csvData</span> <span class="o">=</span> <span class="s1">''</span><span class="p">,</span>
    <span class="nx">context</span> <span class="o">=</span> <span class="nx">eventContext</span><span class="p">,</span>
    <span class="nx">receivedJSON</span> <span class="o">=</span> <span class="nx">webhookJSON</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">parseFileName</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">url_string</span><span class="p">){</span>
    <span class="nx">path</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">url_string</span><span class="p">).</span><span class="nx">pathname</span>
    <span class="k">return</span> <span class="nx">path</span><span class="p">.</span><span class="nx">substr</span><span class="p">(</span><span class="nx">path</span><span class="p">.</span><span class="nx">lastIndexOf</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span>
  <span class="p">}</span>

  <span class="c1">// Remove Headers</span>
  <span class="kd">var</span> <span class="nx">removeFirstLine</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">chunk</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">firstLineRemoved</span><span class="p">){</span>
      <span class="nx">csvData</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">;</span>
    <span class="p">}</span><span class="k">else</span><span class="p">{</span>
      <span class="kd">var</span> <span class="nx">buffer</span> <span class="o">=</span> <span class="nx">chunk</span><span class="p">.</span><span class="nx">toString</span><span class="p">();</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">buffer</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">'\n'</span><span class="p">)</span> <span class="o">!==</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">csvData</span> <span class="o">+=</span> <span class="nx">chunk</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="nx">chunk</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">'\n'</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
        <span class="nx">firstLineRemoved</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
        <span class="nx">buffer</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">uploadCsv</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="kd">var</span> <span class="nx">upload_details</span> <span class="o">=</span> <span class="p">{</span><span class="na">Bucket</span><span class="p">:</span> <span class="nx">targetBucket</span><span class="p">,</span> <span class="na">Key</span><span class="p">:</span> <span class="nx">fileName</span><span class="p">,</span> <span class="na">Body</span><span class="p">:</span> <span class="nx">csvData</span><span class="p">};</span>
    <span class="nx">s3</span><span class="p">.</span><span class="nx">upload</span><span class="p">(</span><span class="nx">upload_details</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">err</span><span class="p">){</span>
        <span class="c1">// an error occurred</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">err</span><span class="p">.</span><span class="nx">stack</span><span class="p">);</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">fail</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
      <span class="p">}</span><span class="k">else</span><span class="p">{</span>
        <span class="c1">// successful response</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">succeed</span><span class="p">({</span><span class="s2">"status"</span><span class="p">:</span> <span class="s2">"success"</span><span class="p">,</span> <span class="s2">"payload"</span><span class="p">:</span> <span class="nx">receivedJSON</span><span class="p">});</span>
      <span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="p">{</span>
    <span class="na">processCsv</span><span class="p">:</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">fileName</span> <span class="o">=</span> <span class="nx">parseFileName</span><span class="p">(</span><span class="nx">downloadUrl</span><span class="p">);</span>
      <span class="nx">https</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">downloadUrl</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">httpResponse</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">httpResponse</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'data'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">removeFirstLine</span><span class="p">(</span><span class="nx">chunk</span><span class="p">);</span>
        <span class="p">});</span>
        <span class="nx">httpResponse</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'end'</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">httpResponse</span><span class="p">);</span>
          <span class="nx">uploadCsv</span><span class="p">();</span>
        <span class="p">});</span>
      <span class="p">});</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Lambda event Handler</span>
<span class="nx">exports</span><span class="p">.</span><span class="nx">handler</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">receivedJSON</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">event</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Received event:'</span><span class="p">,</span> <span class="nx">receivedJSON</span><span class="p">);</span>
  <span class="k">if</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">type</span> <span class="o">==</span> <span class="s1">'data.full_table_exported'</span><span class="p">){</span>
    <span class="kd">var</span> <span class="nx">receiver</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">csvReceiver</span><span class="p">(</span><span class="nx">event</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">url</span><span class="p">,</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">receivedJSON</span><span class="p">);</span>
    <span class="nx">receiver</span><span class="p">.</span><span class="nx">processCsv</span><span class="p">();</span>
  <span class="p">}</span><span class="k">else</span><span class="p">{</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">succeed</span><span class="p">({</span><span class="s2">"status"</span><span class="p">:</span> <span class="s2">"skipped"</span><span class="p">,</span> <span class="s2">"payload"</span><span class="p">:</span> <span class="nx">receivedJSON</span><span class="p">});</span>
  <span class="p">}</span>
<span class="p">};</span>
</code></pre>
<p>From the Lambda management console, you&rsquo;ll need to do the following.</p>

<h4 id="create-the-receiver-lambda">Create the Receiver Lambda</h4>

<ol>
<li>Click to create a new Lambda function.</li>
<li>Skip the existing blueprints (button towards the bottom of page)</li>
<li>Name your function something like &ldquo;controlShiftWebhookReciever&rdquo; and leave the runtime to node default.</li>
<li>Copy and paste the &ldquo;Lambda Receiver&rdquo; function from the right into the inline lambda code editor.</li>
<li>Update the <code class="prettyprint">targetBucket</code> in the inline code editor (approximately line 6 after copying/pasting).</li>
<li>Leave the handler as the default.</li>
<li>For role, select &ldquo;S3 Execution role&rdquo;. This will open a new window.</li>
<li>In this new window, called &ldquo;IAM Management Console&rdquo;, the IAM role field should say &ldquo;Create a new role.&rdquo; Name this new role something relevant, like &ldquo;controlShiftReceriver_s3.&rdquo; Then click &ldquo;Allow&rdquo; in the far bottom left corner, this returns you to the previous window.</li>
<li>Next, set the memory size to 128MB. If you have a large petitions DB, you will likely need more. You can always update the memory size later and you can check the log stream in CloudWatch monitoring to see how much memory was used.</li>
<li>Set the Timeout a little higher - 30 seconds should be fine.</li>
<li>Use &ldquo;No VPC&rdquo;.</li>
<li>Click next, then on the next page just click &ldquo;Create Function&rdquo;!</li>
</ol>

<h4 id="setup-the-api-endpoint">Setup the API Endpoint</h4>

<p>Now that we have our Lambda setup, we need to be able to POST to it from your Control Shift instance.</p>

<ol>
<li>If not already there, go back to the Receiver Lambda we just created.</li>
<li>Click on the &ldquo;API Endpoints&rdquo; tab and click to add a new endpoint.</li>
<li>Select an API Gateway.</li>
<li>Set the Method to POST and Security to Open.</li>
<li>Click create. Done!</li>
</ol>

<hr>

<h3 id="setting-up-redshift-database">Setting Up RedShift Database</h3>

<p>Click on Redshift service in the AWS console.</p>

<h4 id="launch-your-cluster">Launch Your Cluster</h4>

<ol>
<li>Click to create your cluster.</li>
<li>Setup a identifier, database name, master user name and password as you desire and click next. Let&rsquo;s use these values for this example:

<ul>
<li>Cluster: control-shift-cluster</li>
<li>Database name: controlshiftdb</li>
<li>Port: Leave the default</li>
<li>Master Username: masteruser</li>
</ul></li>
<li>Use the defaults on the next two screens, &ldquo;Node Configuration&rdquo; and &ldquo;Additional Configuration, just click next.</li>
<li>Then Launch!</li>
<li>Once the creation and launch process finishes, you can click to view your new cluster&rsquo;s properties, which will include an  endpoint address. Save that address somewhere. Example: <code class="prettyprint">control-shift-cluster.xXxXxX00Xx.us-east-1.redshift.amazonaws.com</code></li>
</ol>

<h4 id="prepare-redshift-connection-security">Prepare Redshift Connection Security</h4>

<p>We need to whitelist relevant IP addresses in our default security group. We&rsquo;ll need to add two rules. While we&rsquo;re managing our security through a VPC (Virtual Private Cloud), the best UI for our purposes is actually in the EC2 configuration console.</p>

<ol>
<li>Go to the AWS Console &gt; EC2</li>
<li>Click on &quot;Security Groups&rdquo; in the left hand menu.</li>
<li>Click on the default Security Group (it should say default in the &ldquo;Group Name&rdquo; column)</li>
<li>Click on the &ldquo;Inbound Rules&rdquo; tab at the bottom and click &ldquo;Edit.&rdquo;</li>
<li>Click &ldquo;Add Rule&rdquo; to start adding our first rule.</li>
<li>Select &ldquo;All Traffic&rdquo; for &ldquo;type&rdquo; and for &ldquo;source&rdquo; select &ldquo;My IP.&rdquo; This should pre-fill your CIDR.  Save the new rule.</li>
<li>Click &ldquo;Add Rule&rdquo; again.</li>
<li>Select &ldquo;Redshift&rdquo; for &ldquo;Type.&rdquo; Enter your cluster&rsquo;s port (typically 5439). Type &ldquo;sg-&rdquo; into the source field, and it should pull up your default security group.</li>
</ol>

<p><strong>Note:</strong> If you&rsquo;re having trouble getting your own IP/CIDR setup, try either looking up your subnet mask and using <a href="https://en.wikipedia.org/wiki/Classless_Inter-Domain_Routing#IPv4_CIDR_blocks">this table</a>. Your CIDR will almost always be your ip address followed by <code class="prettyprint">/32</code> or <code class="prettyprint">/64</code> for ipv6.  Example: <code class="prettyprint">123.123.123.123/32</code>. If all else fails, use the &ldquo;Anywhere&rdquo; global option <code class="prettyprint">0.0.0.0/0</code> - opening your cluster to the public Internet. The latter isn&rsquo;t recommended. If you do have to do this, make sure you remove the rule when you&rsquo;re done.</p>

<h4 id="prepare-redshift-schema">Prepare Redshift Schema</h4>

<p>We need to prep our tables data schema to receive our ControlShift Data.  We&rsquo;ll use <code class="prettyprint">psql</code> for this.</p>

<ol>
<li>Install <code class="prettyprint">psql</code> if you don&rsquo;t have it already.</li>
<li>Download the current schema for our petitions table as <a href="/data/petitions_schema.sql" target="_blank">petitions_schema.sql</a>.</li>
<li>Finally, you&rsquo;ll need to load that schema into your table with the following command:</li>
</ol>

<p><code class="prettyprint">psql -h &lt;cluster_endpoint&gt; -U &lt;database_user&gt; -d &lt;database_name&gt; -p &lt;cluster_port&gt; -f petitions_schema.sql</code></p>

<p><strong>Note:</strong> When connecting, you should almost immediately get a request for your password. If your connection is timing out <em>before</em> you enter your password, there is an authorization issue. If you are timing out <em>after</em> connecting, you can extend your keep alive timeout with the following shell command.</p>

<p><code class="prettyprint">sudo /sbin/sysctl -w net.ipv4.tcp_keepalive_time=200 net.ipv4.tcp_keepalive_intvl=200 net.ipv4.tcp_keepalive_probes=5</code></p>

<h4 id="creating-a-database-user-granting-privileges">Creating a Database User &amp; Granting Privileges</h4>

<blockquote>
<p>Creating a user and granting INSERT Privileges</p>
</blockquote>
<pre class="highlight sql tab-sql"><code><span class="k">CREATE</span> <span class="k">USER</span> <span class="n">redshift_user</span> <span class="n">PASSWORD</span> <span class="n">PlainTextPassword123</span><span class="p">;</span>
<span class="k">ALTER</span> <span class="k">TABLE</span> <span class="n">petitions</span> <span class="k">OWNER</span> <span class="k">TO</span> <span class="n">redshift_user</span><span class="p">;</span>
<span class="k">GRANT</span> <span class="k">INSERT</span> <span class="k">ON</span> <span class="n">petitions</span> <span class="k">TO</span> <span class="n">redshift_user</span><span class="p">;</span>
</code></pre>
<p>We need to allow our user to access our aws-lambda-redshift-loader to access our Redshift database. Connect via psql and create your user and grant permissions. See code example.</p>

<p><code class="prettyprint">psql -h &lt;cluster_endpoint&gt; -U &lt;database_user&gt; -d &lt;database_name&gt; -p &lt;cluster_port&gt;</code></p>

<p><strong>Security Notes:</strong></p>

<ul>
<li>Typically, we&rsquo;d like to limit the privileges we&rsquo;re granting our redshift_user to just INSERT and TRUNCATE. Unfortunately, Redshift doesn&rsquo;t allow us to specifically grant TRUNCATE permissions. Thus, our redshift_user must own the table.</li>
<li>In PostgreSQL, we wouldn&rsquo;t need to grant INSERT privileges to the owner, but Redshift seems to need this.</li>
<li>For Redshift cluster versions &gt; 1.0.1046, you can store your password as a MD5 hash instead of cleartext. At the time of this writing, most clusters are on version 1.0.1044. See the md5 section of the <a href="http://docs.aws.amazon.com/redshift/latest/dg/r_CREATE_USER.html">create user documentation</a>.</li>
</ul>

<hr>

<h3 id="setting-up-aws-lambda-redshift-loader">Setting up aws-lambda-redshift-loader</h3>

<h4 id="deploying-the-aws-lambda-redshift-loader-function">Deploying the aws-lambda-redshift-loader Function</h4>

<blockquote>
<p>AWS Lambda Execution Role</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"Version"</span><span class="p">:</span><span class="s2">"2012-10-17"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"Statement"</span><span class="p">:[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"Sid"</span><span class="p">:</span><span class="s2">"Stmt1424787824000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Effect"</span><span class="p">:</span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Action"</span><span class="p">:[</span><span class="w">
        </span><span class="s2">"dynamodb:DeleteItem"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dynamodb:DescribeTable"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dynamodb:GetItem"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dynamodb:ListTables"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dynamodb:PutItem"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dynamodb:Query"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dynamodb:Scan"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"dynamodb:UpdateItem"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sns:GetEndpointAttributes"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sns:GetSubscriptionAttributes"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sns:GetTopicAttributes"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sns:ListTopics"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sns:Publish"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sns:Subscribe"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"sns:Unsubscribe"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"s3:Get*"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"s3:Put*"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"s3:List*"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"kms:Decrypt"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"kms:DescribeKey"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"kms:GetKeyPolicy"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"Resource"</span><span class="p">:[</span><span class="w">
        </span><span class="s2">"*"</span><span class="w">
      </span><span class="p">]</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"Effect"</span><span class="p">:</span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Action"</span><span class="p">:[</span><span class="w">
        </span><span class="s2">"logs:CreateLogGroup"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"logs:CreateLogStream"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"logs:PutLogEvents"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"Resource"</span><span class="p">:</span><span class="s2">"arn:aws:logs:*:*:*"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"Effect"</span><span class="p">:</span><span class="s2">"Allow"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"Action"</span><span class="p">:[</span><span class="w">
        </span><span class="s2">"ec2:CreateNetworkInterface"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ec2:DescribeNetworkInterfaces"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ec2:DetachNetworkInterface"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"ec2:DeleteNetworkInterface"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"Resource"</span><span class="p">:</span><span class="s2">"*"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<ol>
<li>Go to the AWS Lambda Console in the same region as your S3 bucket and Amazon Redshift cluster.</li>
<li>Select Create a Lambda function and enter a name (e.g.: controlShiftRedshiftLoader).</li>
<li>Clone the <a href="https://github.com/awslabs/aws-lambda-redshift-loader">Amazon Redshift Database Loader</a> repository locally</li>
<li>Under Code entry type select &lsquo;Upload a zip file&rsquo; and upload the AWSLambdaRedshiftLoader-2.4.0.zip file from the &ldquo;dist&rdquo; directory on the repository you just cloned.</li>
<li>Set the Runtime to Node.js 0.10.</li>
<li>Use the default values for the handler, and in the Role drop-down, select &ldquo;* Basic Execution Role.&rdquo; A IAM creation wizard will open in a new window.</li>
<li>Follow the wizard, selecting to &ldquo;Create a new IAM Role&rdquo; and name it as you like.  Click to &ldquo;View the Policy&rdquo; and then click edit.</li>
<li>Copy and paste the the AWS Lambda Execution Role permissions from the right.</li>
<li>Then click &ldquo;Add Policy.&rdquo; Select the <code class="prettyprint">AmazonRedshiftFullAccess</code> role and add it, then add another role - <code class="prettyprint">AmazonDMSRedshiftS3Role</code>.</li>
<li>Navigate back to your Lambda setup tab and set the max timeout (5 minutes) to accommodate potentially long COPY times.</li>
<li>From the VPC dropdown, select your default VPC.</li>
<li>Leave the rest of the settings unchanged.</li>
<li>Click next and then click to create your Lambda.</li>
</ol>

<h4 id="establishing-an-event-source">Establishing an Event Source</h4>

<p>Once deployed, you need to add an event source:</p>

<ol>
<li>Select &ldquo;Event Source&rdquo; tab and click to &ldquo;Add event source.&rdquo;</li>
<li>The event source type should be set to S3.</li>
<li>Select the S3 bucket you want to use for input data - controlshift-receiver.</li>
<li>Select the &lsquo;Object Created (All)&rsquo; notification type.</li>
</ol>

<h4 id="configuration-prep">Configuration Prep</h4>

<p>Setup your AWS credentials as environment variables as follows:
<code class="prettyprint">export AWS_ACCESS_KEY_ID=XXXXXXXXX AWS_SECRET_ACCESS_KEY=XXXXXXXXXXX AWS_REGION=us-east-1</code></p>

<h4 id="running-setup-js">Running setup.js</h4>

<ol>
<li>After setting up your environment, head to your local copy of aws-lambda-redshift-loader.</li>
<li>run <code class="prettyprint">npm install</code> to install package&rsquo;s dependencies.</li>
<li>run <code class="prettyprint">node setup.js</code>.</li>
<li>The script will request various configuration options.  Some sensible responses for our use case are below. Empty responses were just skipped.</li>
</ol>

<table><thead>
<tr>
<th></th>
</tr>
</thead><tbody>
<tr>
<td>Enter the Region for the Configuration &gt; us-east-1</td>
</tr>
<tr>
<td>Enter the S3 Bucket &amp; Prefix to watch for files &gt; controlshift-receiver</td>
</tr>
<tr>
<td>Enter a Filename Filter Regex &gt;</td>
</tr>
<tr>
<td>Enter the Cluster Endpoint &gt; control-shift-cluster.xXxXxX00Xx.us-east-1.redshift.amazonaws.com</td>
</tr>
<tr>
<td>Enter the Cluster Port &gt; 5439</td>
</tr>
<tr>
<td>Does your cluster use SSL (Y/N)  &gt; Y</td>
</tr>
<tr>
<td>Enter the Database Name &gt; controlshiftdb</td>
</tr>
<tr>
<td>Enter the Table to be Loaded &gt; petitions</td>
</tr>
<tr>
<td>Enter the comma-delimited column list (optional) &gt; (Copy and paste from our <a href="data/petitions_headers.csv">petitions_headers.csv</a>)</td>
</tr>
<tr>
<td>Should the Table be Truncated before Load? (Y/N) &gt; Y # Don&rsquo;t truncate if this lambda will handle incremental builds.</td>
</tr>
<tr>
<td>Enter the Database Username &gt; masteruser # Or any user you created in psql</td>
</tr>
<tr>
<td>Enter the Database Password &gt; SuPeRs8CuR1tY # your password</td>
</tr>
<tr>
<td>Enter the Data Format (CSV, JSON or AVRO) &gt; CSV</td>
</tr>
<tr>
<td>Enter the CSV Delimiter &gt; ,</td>
</tr>
<tr>
<td>Enter the S3 Bucket for Redshift COPY Manifests &gt; controlshift-manifests</td>
</tr>
<tr>
<td>Enter the Prefix for Redshift COPY Manifests &gt; manifests</td>
</tr>
<tr>
<td>Enter the Prefix to use for Failed Load Manifest Storage &gt; failed</td>
</tr>
<tr>
<td>Enter the Access Key used by Redshift to get data from S3. If NULL then Lambda execution role credentials will be used &gt; <aws key></td>
</tr>
<tr>
<td>Enter the Secret Key used by Redshift to get data from S3. If NULL then Lambda execution role credentials will be used &gt; <aws key></td>
</tr>
<tr>
<td>Enter the SNS Topic ARN for Successful Loads &gt;</td>
</tr>
<tr>
<td>Enter the SNS Topic ARN for Failed Loads &gt;</td>
</tr>
<tr>
<td>How many files should be buffered before loading? &gt; 1</td>
</tr>
<tr>
<td>How old should we allow a Batch to be before loading (seconds)? &gt; 120</td>
</tr>
<tr>
<td>Additional Copy Options to be added &gt;</td>
</tr>
<tr>
<td>If Encrypted Files are used, Enter the Symmetric Master Key Value &gt;</td>
</tr>
</tbody></table>

<hr>

<h3 id="configure-controlshifts-webhook">Configure ControlShift&rsquo;s webhook</h3>

<p>Finally, you&rsquo;ll need to log into your admin panel.  Settings &gt; CRM Integrations &amp; Webhooks &gt; Configure Webhook Endpoints.  Then add a bulk data webhook pointing at your Lambda endpoint.</p>

<h3 id="troubleshooting-errors">Troubleshooting Errors</h3>

<blockquote>
<p>Example LambdaRedshiftBatches error</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"control-shift-cluster.ckcgajpfnj82.us-east-1.redshift.amazonaws.com"</span><span class="p">:{</span><span class="w">
    </span><span class="s2">"status"</span><span class="p">:</span><span class="mi">-1</span><span class="p">,</span><span class="w">
    </span><span class="s2">"error"</span><span class="p">:{</span><span class="w">
      </span><span class="s2">"name"</span><span class="p">:</span><span class="s2">"error"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"length"</span><span class="p">:</span><span class="mi">143</span><span class="p">,</span><span class="w">
      </span><span class="s2">"severity"</span><span class="p">:</span><span class="s2">"FATAL"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"code"</span><span class="p">:</span><span class="s2">"28000"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"file"</span><span class="p">:</span><span class="s2">"/home/awsrsqa/padb/src/pg/src/backend/libpq/auth.c"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"line"</span><span class="p">:</span><span class="s2">"402"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"routine"</span><span class="p">:</span><span class="s2">"auth_failed"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>A few tips if things aren&rsquo;t working:</p>

<ul>
<li>Most errors will probably occur when attempting to load data from Lambda into Redshift. The DynamoDB batch history captures errorMessages in the the <code class="prettyprint">LambdaRedshiftBatches</code> table. Click on the <code class="prettyprint">entries</code> field. You can also check AWS CloudWatch &gt; Logs and then click on the appropriate cloud stream.</li>
<li>If you&rsquo;re DynamoDB batch history is empty, but your lambda is being invoked, and AWS CloudWatch logs show timeout errors, your Lambda probably cannot connect to your DynamoDB instance. Try moving your aws-lamda-loader out of the VPC group.</li>
<li>Since Redshift is based on PostgreSQL 8.0.2, there is a healthy amount of overlapping error codes. You can <a href="http://www.postgresql.org/docs/8.0/static/errcodes-appendix.html">lookup errors codes here</a>. Example errors:

<ul>
<li><code class="prettyprint">28000</code> - Unable to connect to the database. Is the username/password/database name entered correctly when running setup.js? Is the user granted proper privileges on your database?</li>
<li><code class="prettyprint">42P01</code> - Redshift doesn&rsquo;t have the table you&rsquo;re trying to import data into. Did you import the schema as described above?</li>
<li><code class="prettyprint">XX000</code> - This is an internal error. In our case, the most likely causes are either an invalid schema usually caused by an <a href="http://docs.aws.amazon.com/redshift/latest/dg/c_unsupported-postgresql-datatypes.html">unsupported data type</a>. Double check that your imported schema is correct. If you aren&rsquo;t using the provided schema, double check that you&rsquo;re using the supported types and that your imported data matches those types.</li>
<li><code class="prettyprint">42601</code> - Syntax error - This is most likely a typo when running setup.js. If you&rsquo;re entering your CSV columns during setup, be sure they match the schema you&rsquo;ve loaded into the database. Make sure your CSV Delimiter is set correctly and your CSV is properly formated.</li>
<li><code class="prettyprint">42501</code> - Insufficient privileges errors.  Did you GRANT your user all the privileges required?</li>
</ul></li>
<li>Try manually uploading a petitions export to your <code class="prettyprint">controlshift-receiver</code> S3 bucket, and check DynamoDB batch history for errors. You can fetch these exports from your ControlShift Labs instance, in Settings &gt; Exports.

<ul>
<li>If you get an error message &ldquo;Unknown Error during Customer Master Key describe&rdquo; when running setup.js, you probably didn&rsquo;t <code class="prettyprint">export</code>the environment params as described above.</li>
</ul></li>
</ul>

          <h1 id="authenticated-rest-api">Authenticated REST API</h1>

<p>The Authenticated REST API allows customers to build applications that interact with their own data or securely grant access to third-party app developers without exposing administrative credentials. It is designed to be consumed server-side, in contrast to the JSONP API which is designed for unauthenticated javascript integrations. </p>

<p>We use <a href="http://oauth.net/2/">OAuth2</a> to allow organizations to securely grant access to API Applications. OAuth2 is a standardized protocol that allows user credentials to be exchanged for a secret token which can then be used to access an API. There are OAuth2 implementations available for most common programming languages. You&rsquo;ll probably want to read some general documentation on how OAuth2 works before attempting to use this API. </p>

<p>An <em>API Application</em> must be configured within your ControlShift instance before using the API. Access is then granted to this application, and exchanged for a token which is used to authenticate your access to API endpoints.   </p>

<h2 id="quickstart-guide">Quickstart Guide</h2>

<p>There are two ways to get set up to use the authenticated API. Use whichever is easier for you. <em>You only need to do one of these.</em></p>

<h3 id="the-easy-way-client-credentials">The Easy Way: Client Credentials</h3>

<ol>
<li><p><strong>Set up a new API Application</strong> Log in as an Organisation Owner and navigate to Settings &gt; Integrations &gt; Configure API Applications. Add a New Application. Use urn:ietf:wg:oauth:2.0:oob as the callback URL unless you plan to allow self-service application authorization.</p></li>
<li><p>Clone the <a href="https://github.com/controlshift/oauth-api-example">oauth-api-example</a> github repo.</p></li>
<li><p>Follow the instructions in the README.md file to get that example working with your credentials.</p></li>
<li><p>Do something similar in your actual code.</p></li>
</ol>

<h3 id="the-hard-way-application-and-token-exchange">The Hard Way: Application and Token Exchange</h3>

<p>These are the steps to setup a new API Application and to use that new API Application to access platform resources through OAuth2. In a production context, automating these steps is recommended. </p>

<blockquote>
<p>Use cURL to do the token exchange</p>
</blockquote>
<pre class="highlight shell"><code>curl -X POST --header <span class="s2">"Content-Type: application/json"</span> --header <span class="s2">"Accept: application/json"</span> --data <span class="s1">'{"grant_type":"authorization_code", "code":"{code}", "client_id":"{client_id}", "client_secret":"{client_secret}", "redirect_uri":"{redirect_uri}"}'</span> https://foo.controlshiftlabs.com/oauth/token
</code></pre>
<ol>
<li><p><strong>Set up a new API Application</strong> Log in as an Organisation Owner and navigate to Settings &gt; Integrations &gt; Configure API Applications. Add a New Application. Use urn:ietf:wg:oauth:2.0:oob as the callback URL unless you plan to allow self-service application authorization.</p></li>
<li><p><strong>Generate Authorization Code</strong> From the API Application show page, click &ldquo;Authorize&rdquo;. This will generate a code that can be exchanged with a token to act as the currently signed in user. After the authorization is approved, an authorization code should be displayed. Record this code for the next step. </p></li>
<li><p><strong>Exchange Authorization Code for Token</strong> Take the authorization code from the previous step and exchange it for an OAuth2 Token. </p>

<p><code class="prettyprint">POST https://foo.controlshiftlabs.com/oauth/token
  client_id=...
  redirect_uri=...
  grant_type=authorization_code
  client_secret=...
  code=...</code></p></li>
<li><p><strong>Use Token to Access API</strong> The token can now be used to access API endpoints as the authorized user. </p>

<p><code class="prettyprint">GET https://foo.controlshiftlabs.com/api/v1/organisation?access_token={token}</code></p>

<p>Should return a json representation of the current organisation. See documentation for other endpoints that are available. </p></li>
</ol>

<p>We&rsquo;ve also written an example <a href="https://github.com/controlshift/controlshift-oauth-example">of this same work flow</a> in ruby using the oauth2 gem. </p>

<p>In most production scenarios instead of manually performing the authorization, and exchanging the code for a token, this setup process would be automated. See your oauth2 library documentation for more information. </p>

          <h2 id="organisation">Organisation</h2>

<h3 id="retrieve">Retrieve</h3>

<p>Get up to date statistics about the current organisation.</p>

<blockquote>
<p>GET /api/v1/organisation</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"organisation"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"petitions_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
    </span><span class="s2">"signatures_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
    </span><span class="s2">"blast_emails_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
    </span><span class="s2">"members_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
          <h2 id="email-opt-in-types">Email Opt In Types</h2>

<h3 id="list">List</h3>

<p>Get a list of the email opt in types that have been configured for this organisation. </p>

<p>Email opt in types represent the way that members have opted in to your email list. </p>

<h4 id="context">Context</h4>

<p>The context this opt in type was displayed to users in.</p>

<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>web_form</td>
<td>an action on the web</td>
</tr>
<tr>
<td>email</td>
<td>in a confirmation email</td>
</tr>
<tr>
<td>offline</td>
<td>collected offline via a paper form</td>
</tr>
<tr>
<td>external</td>
<td>represents opt ins gathered in other systems</td>
</tr>
</tbody></table>

<h4 id="kind">Kind</h4>

<p>The sort of opt in that was gathered</p>

<table><thead>
<tr>
<th>Value</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email_confirmation</td>
<td>an action on the web</td>
</tr>
<tr>
<td>implicit</td>
<td>a message displayed while taking action</td>
</tr>
<tr>
<td>offline</td>
<td>collected offline via a paper form</td>
</tr>
<tr>
<td>unchecked_checkbox</td>
<td>a checkbox that began unchecked</td>
</tr>
<tr>
<td>physical_signature</td>
<td>a wet ink signature</td>
</tr>
<tr>
<td>pre_checked_checkbox</td>
<td>a checkbox that began checked</td>
</tr>
<tr>
<td>radio</td>
<td>a radio button with yes/no options</td>
</tr>
</tbody></table>

<h4 id="active">Active</h4>

<p>This parameter is true if the opt in type is currently being used in it&rsquo;s specified context.</p>

<h4 id="mailable">Mailable</h4>

<p>Whether this opt-in type should be considered valid for email.</p>

<h4 id="external_id">external_id</h4>

<p>External IDs are set by customers through the admin interface while configuring opt in types. You can use them to match up email opt in types
with your external systems, or to refer to email opt in types consistently through this API. </p>

<blockquote>
<p>GET /api/v1/organisation/email_opt_in_types</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"email_opt_in_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
    </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web_form"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"kind"</span><span class="p">:</span><span class="w"> </span><span class="s2">"implicit"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"mailable"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"your-external-id"</span><span class="w">
  </span><span class="p">}]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
          <h2 id="consent-content-versions">Consent Content Versions</h2>

<h3 id="list">List</h3>

<p>Get a list of the Data Processing Consent Content Versions that have been configured for this organisation. </p>

<p>These content versions track changes to the Terms of Service, Privacy Policy and Data Processing Consent disclaimers. </p>

<blockquote>
<p>GET /api/v1/organisation/consent_content_versions</p>
</blockquote>

          <h2 id="members">Members</h2>

<p>The platform transparently creates a member record for any email address that creates a user account, signs a petition, or attends an event. Members are unique by email address, and all 
platform activity is tracked by member id.  </p>

<blockquote>
<p>GET response body for Lookup or Show</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"member"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo@bar.com"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-06-01T15:37:47Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-07-01T11:23:45Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abc123"</span><span class="p">,</span><span class="w">

    </span><span class="s2">"data_processing_consent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"consented_to_latest_version"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">

      </span><span class="s2">"most_recent_consent_from_member"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"consented_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-01T04:00Z"</span><span class="p">,</span><span class="w">

        </span><span class="s2">"consent_content_version"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"25"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"def456"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-12-31T23:59Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<h3 id="lookup">Lookup</h3>

<p>Find a member by email address. Once you have obtained a member id you can use this identifier in other API calls. </p>

<p><code class="prettyprint">GET /api/v1/members/lookup?email=foo@bar.com</code></p>

<h3 id="show">Show</h3>

<p>Find a member by id.</p>

<p>The <code class="prettyprint">data_processing_consent</code> block is only present when the data processing consent feature is enabled.</p>

<p><code class="prettyprint">GET /api/v1/members/123</code></p>

<h3 id="activity">Activity</h3>

<blockquote>
<p>GET response body for Activity</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jane"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Doe"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555-555-5555"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-06-01T15:37:47Z"</span><span class="p">,</span><span class="w">

  </span><span class="s2">"signatures"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"jane.doe@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"petition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"save-the-whales"</span><span class="w">
      </span><span class="p">}</span><span class="w">
      </span><span class="err">...</span><span class="w">
    </span><span class="p">}</span><span class="w">
    </span><span class="err">...</span><span class="w">
  </span><span class="p">]</span><span class="w">
  </span><span class="err">...</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Get information about a member&rsquo;s activity on the platform. This can be useful if you&rsquo;re building a member dashboard that includes information from ControlShift and other toolsets.</p>

<p>The member activity report includes basic biographical information as well as petitions created or signed, events hosted or attended, group memberships, forum posts, partnership subscriptions, and unsubscribe history.</p>

<p><code class="prettyprint">GET /api/v1/members/123/activity</code></p>

<h3 id="destroy">Destroy</h3>

<blockquote>
<p>DELETE response body for Destroy</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"member"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"deleted"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo@bar.com"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Permanently deletes a member with specified id and all associated records including petitions, signatures, events. The deletion feature is designed to honor requests from members around the right to be forgotten.</p>

<p><code class="prettyprint">DELETE /api/v1/members/123</code></p>

<p>Deletes are synchronous and may take several seconds depdending on how many resources are owned by the member. </p>

<p>Ownership of Petitions and Events created by the deleted member will be re-assigned to the user account specified in the organisation&rsquo;s settings. </p>

<h3 id="unsubscribe">Unsubscribe</h3>

<blockquote>
<p>POST response body for Unsubscribe</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"member"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"unsubscribed"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> 
    </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">123</span><span class="p">,</span><span class="w">
    </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"foo@bar.com"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Unsubscribes a member with specified id from emails from event hosts and petiton creators. Member will still receive transactional emails, and will be resubscribed if they opt in while signing a new petition or attending a new event, etc. </p>

<p><code class="prettyprint">POST /api/v1/members/123/unsubscribe</code></p>

<h3 id="update-email-opt-in-type">Update Email Opt In Type</h3>

<h4 id="post-body">POST body</h4>

<p><code class="prettyprint">external_id=foo</code></p>

<p>Changes the email opt in type for the member with the specified id to the external id in the POST body. This will update the opt in type for
all associated signatures, attendee records, user accounts and other data held by ControlShift to the opt in type specified by external_id. </p>

<p>This feature may be useful for upgrading the recorded consent when new consent for email communications has been collected in external systems. </p>

<p>Most likely you will be changing historical consents that may no longer be mailable for legal reasons to a new mailable consent type. </p>

<p>No history is stored recording the original consent type, it is replaced by the new one specified.</p>

<p><code class="prettyprint">POST /api/v1/members/123/update_email_opt_in_type</code></p>

          <h2 id="petitions">Petitions</h2>

<p>Petition are pieces of content that can be signed by members. </p>

<h3 id="show">Show</h3>

<blockquote>
<p>GET response Body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"petition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no-taxes-on-tea"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"No Taxes on Tea"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"King George"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"what"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Stop taxing our tea"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"why"</span><span class="p">:</span><span class="w"> </span><span class="s2">"It is unjust."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"good"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-01-22T19:01:44Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"updated_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-05T15:02:02Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"signature_count_add_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
    </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"effort_near"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"admin_notes"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We should have a call with this campaigner but they have no telephone."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/no-taxes-on-tea"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"public_who"</span><span class="p">:</span><span class="w"> </span><span class="s2">"King George"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"public_signature_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">234</span><span class="p">,</span><span class="w">
    </span><span class="s2">"goal"</span><span class="p">:</span><span class="w"> </span><span class="mi">500</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"won"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_reason"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We overthrew the government and they don't tax our tea anymore."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"successful"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"ended_story"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This was an overwhelming success!"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"image"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"urls"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"open_graph"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://cdn.example.com/petitions/images/25/open_graph/a-little-teapot.png?1516647704"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"horizontal"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://cdn.example.com/petitions/images/25/horizontal/a-little-teapot.png?1516647704"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"hero"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://cdn.example.com/petitions/images/25/hero/a-little-teapot.png?1516647704"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"original"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://cdn.example.com/petitions/images/25/original/a-little-teapot.png?1516647704"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"form"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://cdn.example.com/petitions/images/25/form/a-little-teapot.png?1516647704"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Picture of a small teapot with flowers on it and money tucked under the lid"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"creator"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"full_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patrick Henry"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Patrick"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Henry"</span><span class="w">
      </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"patrick.henry@example.com"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"555-555-5555"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boston harbor"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42.3376368"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-70.99304"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Boston Harbor"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MA"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-16T22:38:29Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"decision_makers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"king-george"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"George"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"King of England"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"phone_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
        </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
          </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"buckingham palace"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"51.501364"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-0.1440787"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Buckingham Palace"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
          </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"London"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SW1A 1AA"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"UK"</span><span class="p">,</span><span class="w">
          </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-16T22:38:29Z"</span><span class="w">
        </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="s2">"effort"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"no-taxation-without-representation"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"partnership"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"the-american-revolution"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Find information about a petition by URL slug.</p>

<p><code class="prettyprint">GET /api/v1/petitions/no-taxes-on-tea</code></p>

<h3 id="update">Update</h3>

<p>Updates petition content using an HTTP PUT request.</p>

<p>We support several request formats for the data to be updated, but the most straightforward is to send the data as a json formatted PUT body. </p>

<p>In the request body only include the fields that you would like to update to a new value. The slug in the URL defines which petition should be updated. </p>

<p><code class="prettyprint">PUT /api/v1/petitions/no-taxes-on-tea</code></p>

<blockquote>
<p>PUT request body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"petition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"signature_count_add_amount"</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
          <h2 id="signatures">Signatures</h2>

<p>Signatures are actions that people have taken on Petitions. All signature actions are namespaced by URL underneath the petitions that the signature
was recorded against. </p>

<h3 id="lookup">Lookup</h3>

<p>Find a member by email address. Once you have obtained a member id you can use this identifier in other API calls. </p>

<p><code class="prettyprint">GET /api/v1/petitions/no-taxes-on-tea/signatures/lookup?email=foo@bar.com</code></p>

<h3 id="update-email-opt-in-type">Update email opt in type</h3>

<p>Updates the email opt in type associated with a single signature. This can be used to change the email opt in type
if a more legally compliant form of consent was gathered elsewhere. The email opt in type for the signature is updated
to the opt in type specified by external_id</p>

<p>No history is stored recording the original consent type, it is replaced by the new one specified in the API call.</p>

<p><code class="prettyprint">POST /api/v1/petitions/no-taxes-on-tea/signatures/123</code></p>

<h4 id="post-body">POST body</h4>

<p><code class="prettyprint">external_id=foo</code></p>

<h3 id="list">List</h3>

<p>List the signatures that are part of a Petition. </p>

<p>This is a paginated response. You can advance to the next page using the page parameter, which accepts a page number integer.
By default the first page is returned. </p>

<table><thead>
<tr>
<th>Hash</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>meta</td>
<td>pagination information</td>
</tr>
<tr>
<td>petition</td>
<td>basic information about the petition</td>
</tr>
<tr>
<td>signatures</td>
<td>an array of signature results</td>
</tr>
</tbody></table>

<p><code class="prettyprint">GET /api/v1/petitions/no-taxes-on-tea/signatures?page=2</code></p>

          <h2 id="events">Events</h2>

<p>Events represent real-world or virtual meetings that members can RSVP to. RSVP records are called &ldquo;attendees&rdquo;.</p>

<h3 id="show">Show</h3>

<blockquote>
<p>GET response Body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"event"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"deliver-the-petition-to-the-wizard"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Deliver the Petition to the Wizard"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/events/deliver-the-petition-to-the-wizard"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Join us as we travel to the Emerald City to deliver our petition to the Wizard."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"start"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-01T12:00:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"end"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-01T13:30:00Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"start_in_zone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-01T12:00:00-05:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"end_in_zone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-03-01T13:30:00-05:00"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"time_zone"</span><span class="p">:</span><span class="w"> </span><span class="s2">"America/New_York"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"virtual"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="s2">"launched_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2018-02-03T12:34:56Z"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"locale"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en-US"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"host_address"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"max_attendees_count"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="s2">"external_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"control-shift-deliver-the-petition-to-the-wizard"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"location"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"query"</span><span class="p">:</span><span class="w"> </span><span class="s2">"wizard room"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"latitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42.3376368"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"longitude"</span><span class="p">:</span><span class="w"> </span><span class="s2">"-70.99304"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"venue"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The Wizard's Throne Room"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"street_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"street"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"region"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MA"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
      </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"US"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2017-11-16T22:38:29Z"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="s2">"petition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"repair-the-yellow-brick-road-1"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/petitions/repair-the-yellow-brick-road-1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Find information about an event by URL slug.</p>

<p><code class="prettyprint">GET /api/v1/events/deliver-the-petition-to-the-wizard</code></p>

          <h2 id="calendars">Calendars</h2>

<p>Calendars are collections of related events.</p>

<h3 id="show">Show</h3>

<blockquote>
<p>GET response Body</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"calendar"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Movie Screenings For Healthcare Access"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"We're watching this amazing and powerful movie about the fight for health care for all."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"movie-screenings-for-healthcare-access"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/calendars/movie-screenings-for-healthcare-access"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"partnership"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"slug"</span><span class="p">:</span><span class="w"> </span><span class="s2">"space-captains-for-health-care"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://demo.controlshiftlabs.com/partnerships/space-captains-for-health-care"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Find information about a calendar by URL slug.</p>

<p><code class="prettyprint">GET /api/v1/calendars/movie-screenings-for-healthcare-access</code></p>

<h3 id="list-events">List Events</h3>

<p>List the events that are part of a Calendar. </p>

<p>This is a paginated response. You can advance to the next page using the page parameter, which accepts a page number integer.
By default the first page is returned. </p>

<table><thead>
<tr>
<th>Hash</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>meta</td>
<td>pagination information</td>
</tr>
<tr>
<td>calendar</td>
<td>basic information about the calendar</td>
</tr>
<tr>
<td>events</td>
<td>an array of event results</td>
</tr>
</tbody></table>

<p><code class="prettyprint">GET /api/v1/calendars/movie-screenings-for-healthcare-access/events?page=2</code></p>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
          </div>
      </div>
    </div>
    <script>
      $(document).ready(function(){
        var defaultOptions = {
          "title": "ControlShift Labs Example",
          "editors": "101",
          "html": "Oops.  There has been an error.",
          "js": "",
          "css_external": "https://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css",
          "js_library": "jquery"
        }

        $.each($('.js-codepen-data'), function(index, codePenHTML){
          $codePenDomObject = $(codePenHTML);
          var dataOptions = jQuery.extend({}, defaultOptions);
          dataOptions = jQuery.extend(dataOptions, $codePenDomObject.data());
          dataOptions.html = '  <div class="container">';
          dataOptions.html += $codePenDomObject.find('.codepen-html').html();
          dataOptions.html += '</div>';
          dataOptions.js = $codePenDomObject.find('.codepen-js').html();
          $codePenDomObject.next().removeClass('hidden').find('.js-data').val(JSON.stringify(dataOptions));
        });
      });
    </script>
  </body>
</html>
